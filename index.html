<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FoodSave â€“ Reduce Waste, Feed Hope</title>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&family=Playfair+Display:wght@700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --g1:#0f2027;--g2:#203a43;--g3:#2c5364;
  --green:#00e676;--green2:#00bfa5;--orange:#ff6d00;--purple:#7c4dff;
  --blue:#0288d1;--red:#f4511e;--gold:#ffd600;
  --glass:rgba(255,255,255,0.07);--glass2:rgba(255,255,255,0.13);
  --border:rgba(255,255,255,0.12);--shadow:0 8px 40px rgba(0,0,0,0.35);
  --radius:20px;--font:'Outfit',sans-serif;
}
body{font-family:var(--font);background:linear-gradient(135deg,var(--g1),var(--g2),var(--g3));min-height:100vh;overflow-x:hidden;color:#fff}
/* CANVAS BG */
#bgCanvas{position:fixed;inset:0;z-index:0;pointer-events:none}

/* ===== HEADER ===== */
.header{position:fixed;top:0;left:0;right:0;z-index:999;padding:14px 40px;display:flex;align-items:center;justify-content:space-between;background:rgba(10,25,35,0.6);backdrop-filter:blur(18px);border-bottom:1px solid var(--border);animation:slideDown .5s ease-out}
@keyframes slideDown{from{transform:translateY(-100%);opacity:0}to{transform:translateY(0);opacity:1}}
.logo{display:flex;align-items:center;gap:12px;cursor:pointer}
.logo-icon{width:44px;height:44px;background:linear-gradient(135deg,var(--green),var(--green2));border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:22px;animation:pulse 3s infinite}
@keyframes pulse{0%,100%{box-shadow:0 0 0 0 rgba(0,230,118,0.4)}50%{box-shadow:0 0 0 12px rgba(0,230,118,0)}}
.logo-text{font-size:26px;font-weight:800;background:linear-gradient(90deg,var(--green),var(--green2),#64ffda);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.header-right{display:flex;align-items:center;gap:20px}
/* Lang switcher */
.lang-switcher{display:flex;gap:6px;background:var(--glass);border:1px solid var(--border);border-radius:50px;padding:4px}
.lang-btn{padding:5px 14px;border-radius:50px;border:none;background:transparent;color:rgba(255,255,255,0.6);font-size:12px;font-weight:600;cursor:pointer;transition:.25s;font-family:var(--font)}
.lang-btn.active{background:linear-gradient(135deg,var(--green),var(--green2));color:#000}
.lang-btn:hover:not(.active){background:rgba(255,255,255,0.1);color:#fff}
.header-nav{display:flex;gap:8px}
.nav-pill{padding:7px 18px;border-radius:50px;background:var(--glass);border:1px solid var(--border);color:rgba(255,255,255,0.8);font-size:13px;font-weight:600;cursor:pointer;transition:.25s;font-family:var(--font)}
.nav-pill:hover{background:var(--glass2);color:#fff;border-color:rgba(255,255,255,0.3)}
.nav-pill.green{background:linear-gradient(135deg,var(--green),var(--green2));border-color:transparent;color:#000}
.nav-pill.green:hover{opacity:.9;color:#000}

/* ===== SECTIONS ===== */
.section{display:none;position:relative;z-index:1;min-height:100vh;padding-top:80px}
.section.active{display:block}

/* ===== HOME ===== */
.hero{text-align:center;padding:60px 20px 30px;animation:fadeUp .8s ease-out}
@keyframes fadeUp{from{transform:translateY(40px);opacity:0}to{transform:translateY(0);opacity:1}}
.hero-badge{display:inline-block;padding:6px 20px;background:rgba(0,230,118,0.15);border:1px solid rgba(0,230,118,0.35);border-radius:50px;font-size:13px;color:var(--green);font-weight:600;margin-bottom:20px;animation:fadeUp .6s .1s both}
.hero h1{font-family:'Playfair Display',serif;font-size:clamp(38px,6vw,74px);line-height:1.1;margin-bottom:20px;animation:fadeUp .7s .2s both}
.hero h1 span{background:linear-gradient(90deg,var(--green),#64ffda,var(--green2));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{font-size:clamp(15px,2vw,19px);color:rgba(255,255,255,0.7);max-width:580px;margin:0 auto 40px;line-height:1.7;animation:fadeUp .7s .3s both}
.hero-btns{display:flex;gap:16px;justify-content:center;flex-wrap:wrap;animation:fadeUp .7s .4s both}
.btn-hero{padding:14px 36px;border-radius:50px;font-size:16px;font-weight:700;cursor:pointer;border:none;transition:.3s;font-family:var(--font)}
.btn-hero.primary{background:linear-gradient(135deg,var(--green),var(--green2));color:#000;box-shadow:0 6px 30px rgba(0,230,118,0.35)}
.btn-hero.primary:hover{transform:translateY(-3px);box-shadow:0 12px 40px rgba(0,230,118,0.5)}
.btn-hero.outline{background:transparent;border:2px solid rgba(255,255,255,0.3);color:#fff}
.btn-hero.outline:hover{background:var(--glass2);border-color:rgba(255,255,255,0.5)}

/* Stats */
.stats-row{display:flex;justify-content:center;gap:20px;flex-wrap:wrap;padding:20px;animation:fadeUp .7s .5s both}
.stat-bubble{background:var(--glass);backdrop-filter:blur(12px);border:1px solid var(--border);border-radius:24px;padding:24px 36px;text-align:center;transition:.3s}
.stat-bubble:hover{transform:translateY(-6px);background:var(--glass2)}
.stat-bubble .num{font-size:38px;font-weight:800;background:linear-gradient(135deg,var(--green),#64ffda);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.stat-bubble .lbl{font-size:13px;color:rgba(255,255,255,0.6);text-transform:uppercase;letter-spacing:1px;margin-top:4px}
.stat-bubble .ico{font-size:28px;margin-bottom:8px}

/* Role Cards */
.section-title{text-align:center;margin:40px 0 30px}
.section-title h2{font-size:32px;font-weight:800;margin-bottom:8px}
.section-title p{color:rgba(255,255,255,0.6)}
.roles{display:flex;justify-content:center;gap:28px;flex-wrap:wrap;padding:0 20px 60px;animation:fadeUp .8s .2s both}
.role-card{width:280px;background:var(--glass);backdrop-filter:blur(15px);border:1.5px solid var(--border);border-radius:28px;padding:36px 28px;text-align:center;cursor:pointer;transition:.4s}
.role-card:hover{transform:translateY(-14px) scale(1.03);box-shadow:0 24px 60px rgba(0,0,0,0.4)}
.role-card.admin:hover{border-color:rgba(124,77,255,0.6);box-shadow:0 24px 60px rgba(124,77,255,0.2)}
.role-card.donor:hover{border-color:rgba(0,230,118,0.6);box-shadow:0 24px 60px rgba(0,230,118,0.2)}
.role-card.consumer:hover{border-color:rgba(255,109,0,0.6);box-shadow:0 24px 60px rgba(255,109,0,0.2)}
.role-ico{width:90px;height:90px;border-radius:50%;margin:0 auto 22px;display:flex;align-items:center;justify-content:center;font-size:40px;transition:.5s}
.role-card:hover .role-ico{transform:rotate(15deg) scale(1.1)}
.admin .role-ico{background:linear-gradient(135deg,#5c35cc,var(--purple))}
.donor .role-ico{background:linear-gradient(135deg,var(--green2),var(--green))}
.consumer .role-ico{background:linear-gradient(135deg,var(--red),var(--orange))}
.role-card h3{font-size:24px;font-weight:700;margin-bottom:10px}
.role-card p{font-size:13px;color:rgba(255,255,255,0.65);line-height:1.6}
.role-tag{display:inline-block;margin-top:16px;padding:5px 16px;border-radius:50px;font-size:11px;font-weight:700;letter-spacing:.5px}
.admin .role-tag{background:rgba(124,77,255,0.2);color:#b388ff;border:1px solid rgba(124,77,255,0.3)}
.donor .role-tag{background:rgba(0,230,118,0.15);color:var(--green);border:1px solid rgba(0,230,118,0.3)}
.consumer .role-tag{background:rgba(255,109,0,0.15);color:#ff9d45;border:1px solid rgba(255,109,0,0.3)}

/* ===== AUTH FORM ===== */
.auth-wrap{max-width:460px;margin:0 auto;padding:20px 20px 60px}
.auth-box{background:rgba(12,28,40,0.7);backdrop-filter:blur(24px);border:1px solid var(--border);border-radius:30px;padding:48px 40px;animation:scaleIn .5s ease-out}
@keyframes scaleIn{from{transform:scale(.92);opacity:0}to{transform:scale(1);opacity:1}}
.auth-head{text-align:center;margin-bottom:36px}
.auth-ico{width:76px;height:76px;border-radius:50%;margin:0 auto 18px;display:flex;align-items:center;justify-content:center;font-size:32px}
.auth-head h2{font-size:30px;font-weight:800;margin-bottom:6px}
.auth-head p{color:rgba(255,255,255,0.55);font-size:14px}
.tab-switch{display:flex;background:rgba(255,255,255,0.06);border:1px solid var(--border);border-radius:50px;padding:4px;margin-bottom:32px}
.tab-btn{flex:1;padding:10px;border-radius:50px;border:none;background:transparent;color:rgba(255,255,255,0.5);font-size:14px;font-weight:600;cursor:pointer;transition:.25s;font-family:var(--font)}
.tab-btn.active{background:linear-gradient(135deg,var(--green),var(--green2));color:#000}
.form-field{margin-bottom:20px;position:relative}
.form-field label{display:block;font-size:13px;font-weight:600;color:rgba(255,255,255,0.7);margin-bottom:8px;letter-spacing:.3px}
.form-field .fi{position:absolute;left:16px;top:43px;color:rgba(255,255,255,0.4);font-size:16px;pointer-events:none}
.form-field input,.form-field select{width:100%;padding:14px 16px 14px 44px;background:rgba(255,255,255,0.08);border:1.5px solid var(--border);border-radius:14px;color:#fff;font-size:15px;font-family:var(--font);transition:.3s}
.form-field input::placeholder{color:rgba(255,255,255,0.3)}
.form-field input:focus,.form-field select:focus{outline:none;border-color:var(--green);background:rgba(0,230,118,0.06);box-shadow:0 0 0 3px rgba(0,230,118,0.12)}
.form-field select{cursor:pointer}
.form-field select option{background:#1a2e38;color:#fff}
.btn-auth{width:100%;padding:16px;border:none;border-radius:14px;font-size:16px;font-weight:700;cursor:pointer;transition:.3s;font-family:var(--font);margin-top:4px;position:relative;overflow:hidden}
.btn-auth.green-btn{background:linear-gradient(135deg,var(--green),var(--green2));color:#000;box-shadow:0 6px 24px rgba(0,230,118,0.3)}
.btn-auth.green-btn:hover{transform:translateY(-2px);box-shadow:0 10px 36px rgba(0,230,118,0.45)}
.btn-auth.green-btn::after{content:'';position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent);transform:translateX(-100%);transition:.5s}
.btn-auth.green-btn:hover::after{transform:translateX(100%)}
.auth-divider{text-align:center;margin:20px 0;color:rgba(255,255,255,0.3);font-size:13px;position:relative}
.auth-divider::before,.auth-divider::after{content:'';position:absolute;top:50%;width:42%;height:1px;background:var(--border)}
.auth-divider::before{left:0}.auth-divider::after{right:0}

/* ===== BACK BUTTON ===== */
.back-floating{position:fixed;top:92px;left:20px;z-index:990;width:46px;height:46px;border-radius:50%;background:rgba(12,28,40,0.8);backdrop-filter:blur(10px);border:1px solid var(--border);color:#fff;font-size:18px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:.3s;animation:fadeIn .4s ease-out}
.back-floating:hover{background:var(--glass2);transform:scale(1.1)}

/* ===== DASHBOARD COMMON ===== */
.dash-wrap{padding:30px 20px 60px;max-width:1200px;margin:0 auto;animation:fadeUp .6s ease-out}
.dash-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:36px;flex-wrap:wrap;gap:12px}
.dash-title{font-size:clamp(24px,4vw,36px);font-weight:800}
.dash-title span{display:block;font-size:14px;font-weight:400;color:rgba(255,255,255,0.5);margin-top:4px}
.user-chip{display:flex;align-items:center;gap:10px;background:var(--glass);border:1px solid var(--border);border-radius:50px;padding:8px 20px 8px 8px}
.user-avatar{width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:18px}
.user-chip span{font-size:14px;font-weight:600}
.btn-logout{padding:8px 18px;background:rgba(244,67,30,0.15);border:1px solid rgba(244,67,30,0.3);color:#ff6b6b;border-radius:50px;cursor:pointer;font-size:13px;font-weight:600;transition:.25s;font-family:var(--font)}
.btn-logout:hover{background:rgba(244,67,30,0.25)}

/* Stat cards row */
.dash-stats{display:flex;gap:18px;flex-wrap:wrap;margin-bottom:36px}
.dstat{flex:1;min-width:160px;background:var(--glass);backdrop-filter:blur(12px);border:1px solid var(--border);border-radius:20px;padding:22px 24px;transition:.3s}
.dstat:hover{transform:translateY(-4px);background:var(--glass2)}
.dstat .dnum{font-size:36px;font-weight:800}
.dstat .dlbl{font-size:12px;color:rgba(255,255,255,0.55);text-transform:uppercase;letter-spacing:.8px;margin-top:4px}
.dstat .dico{font-size:28px;margin-bottom:10px}
.dstat.green .dnum{color:var(--green)}
.dstat.blue .dnum{color:#4fc3f7}
.dstat.orange .dnum{color:var(--orange)}
.dstat.purple .dnum{color:#b388ff}

/* Cards grid */
.cg{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:24px}
.card-glass{background:var(--glass);backdrop-filter:blur(15px);border:1px solid var(--border);border-radius:24px;padding:28px;transition:.3s}
.card-glass:hover{transform:translateY(-6px);box-shadow:var(--shadow)}
.card-glass .ch{display:flex;align-items:center;justify-content:space-between;margin-bottom:22px}
.card-glass .ct{font-size:18px;font-weight:700}
.card-ico{width:44px;height:44px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:20px}

/* Form fields inside cards */
.field-row{display:flex;gap:14px;flex-wrap:wrap;margin-bottom:14px}
.field-item{flex:1;min-width:130px}
.field-item label{display:block;font-size:12px;font-weight:600;color:rgba(255,255,255,0.6);margin-bottom:6px;letter-spacing:.3px}
.field-item input,.field-item select{width:100%;padding:11px 14px;background:rgba(255,255,255,0.07);border:1.5px solid var(--border);border-radius:12px;color:#fff;font-size:14px;font-family:var(--font);transition:.25s}
.field-item input:focus,.field-item select:focus{outline:none;border-color:var(--green);background:rgba(0,230,118,0.05)}
.field-item input::placeholder{color:rgba(255,255,255,0.25)}
.field-item select option{background:#1a2e38}
.btn-calc{padding:12px 24px;background:linear-gradient(135deg,var(--green),var(--green2));color:#000;border:none;border-radius:12px;font-size:14px;font-weight:700;cursor:pointer;transition:.25s;font-family:var(--font);display:flex;align-items:center;gap:8px}
.btn-calc:hover{transform:translateY(-2px);box-shadow:0 6px 22px rgba(0,230,118,0.35)}
.freshness-result{margin-top:14px;padding:14px 18px;border-radius:12px;font-size:14px;font-weight:600;display:none}
.freshness-result.good{background:rgba(0,230,118,0.15);border:1px solid rgba(0,230,118,0.3);color:var(--green)}
.freshness-result.warn{background:rgba(255,214,0,0.12);border:1px solid rgba(255,214,0,0.3);color:var(--gold)}
.freshness-result.bad{background:rgba(244,67,30,0.12);border:1px solid rgba(244,67,30,0.3);color:#ff6b6b}

/* Sensor meter */
.sensor-meters{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin:14px 0}
.meter-item{background:rgba(255,255,255,0.05);border-radius:12px;padding:12px 14px}
.meter-item .m-label{font-size:11px;color:rgba(255,255,255,0.5);text-transform:uppercase;letter-spacing:.5px;margin-bottom:6px}
.meter-bar{height:6px;background:rgba(255,255,255,0.1);border-radius:3px;overflow:hidden}
.meter-fill{height:100%;border-radius:3px;transition:width .6s ease}
.meter-val{font-size:16px;font-weight:700;margin-top:5px}

/* ===== PENDING ===== */
.pending-list{display:flex;flex-direction:column;gap:14px}
.pitem{background:var(--glass);backdrop-filter:blur(12px);border:1px solid var(--border);border-radius:18px;padding:18px 22px;display:flex;align-items:center;justify-content:space-between;gap:14px;animation:slideIn .4s ease-out both}
@keyframes slideIn{from{transform:translateX(-30px);opacity:0}to{transform:translateX(0);opacity:1}}
.pitem .pi-info h4{font-size:16px;font-weight:700;margin-bottom:4px}
.pitem .pi-info p{font-size:13px;color:rgba(255,255,255,0.5)}
.btn-approve{padding:10px 22px;background:linear-gradient(135deg,var(--green),var(--green2));border:none;border-radius:10px;color:#000;font-weight:700;font-size:13px;cursor:pointer;transition:.25s;font-family:var(--font)}
.btn-approve:hover{transform:scale(1.05);box-shadow:0 4px 16px rgba(0,230,118,0.3)}
.btn-reject{padding:10px 18px;background:rgba(244,67,30,0.15);border:1px solid rgba(244,67,30,0.3);border-radius:10px;color:#ff6b6b;font-weight:700;font-size:13px;cursor:pointer;transition:.25s;font-family:var(--font);margin-left:8px}
.btn-reject:hover{background:rgba(244,67,30,0.25)}

/* ===== FOOD GRID ===== */
.fg{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:22px}
.fcard{background:var(--glass);backdrop-filter:blur(15px);border:1px solid var(--border);border-radius:22px;overflow:hidden;transition:.4s}
.fcard:hover{transform:translateY(-8px) scale(1.02);box-shadow:0 24px 50px rgba(0,0,0,0.35)}
.fcard-img{height:160px;display:flex;align-items:center;justify-content:center;font-size:64px;position:relative}
.fcard-badge{position:absolute;top:12px;right:12px;padding:4px 12px;border-radius:50px;font-size:11px;font-weight:700;background:rgba(0,230,118,0.85);color:#000}
.fcard-body{padding:22px}
.fcard-body h3{font-size:19px;font-weight:700;margin-bottom:8px}
.fcard-meta{display:flex;justify-content:space-between;font-size:13px;color:rgba(255,255,255,0.55);margin-bottom:12px}
.fcard-price{font-size:26px;font-weight:800;background:linear-gradient(90deg,var(--green),#64ffda);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:14px}
.fcard-price span{font-size:13px;color:rgba(255,255,255,0.5);font-weight:400;-webkit-text-fill-color:rgba(255,255,255,0.5)}
.btn-order{width:100%;padding:13px;border:none;border-radius:12px;background:linear-gradient(135deg,var(--orange),#ff9100);color:#fff;font-size:15px;font-weight:700;cursor:pointer;transition:.3s;font-family:var(--font)}
.btn-order:hover{transform:scale(1.02);box-shadow:0 6px 22px rgba(255,109,0,0.4)}

/* ===== TRANSACTIONS ===== */
.tx-list{display:flex;flex-direction:column;gap:14px}
.tx-item{background:var(--glass);backdrop-filter:blur(12px);border:1px solid var(--border);border-radius:18px;padding:18px 22px;display:flex;align-items:center;justify-content:space-between;gap:14px;animation:slideIn .4s ease-out both}
.tx-ico{width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:22px;flex-shrink:0}
.tx-info{flex:1}
.tx-info h4{font-size:15px;font-weight:700;margin-bottom:3px}
.tx-info p{font-size:12px;color:rgba(255,255,255,0.5)}
.tx-amount{font-size:18px;font-weight:800}
.tx-amount.cr{color:var(--green)}
.tx-amount.db{color:#ff6b6b}
.tx-status{font-size:11px;font-weight:700;padding:4px 12px;border-radius:50px}
.tx-status.completed{background:rgba(0,230,118,0.15);color:var(--green);border:1px solid rgba(0,230,118,0.2)}
.tx-status.pending{background:rgba(255,214,0,0.12);color:var(--gold);border:1px solid rgba(255,214,0,0.2)}

/* ===== TOAST ===== */
.toast{position:fixed;bottom:30px;right:30px;z-index:99999;background:rgba(12,28,40,0.9);backdrop-filter:blur(20px);border:1px solid var(--border);border-radius:18px;padding:16px 24px;display:flex;align-items:center;gap:14px;transform:translateY(120%);transition:.5s cubic-bezier(.68,-.55,.265,1.55);max-width:360px}
.toast.show{transform:translateY(0)}
.toast-ico{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:18px;flex-shrink:0}
.toast.success .toast-ico{background:linear-gradient(135deg,var(--green),var(--green2));color:#000}
.toast.error .toast-ico{background:linear-gradient(135deg,#f44336,#e91e63);color:#fff}
.toast.info .toast-ico{background:linear-gradient(135deg,var(--blue),#4fc3f7);color:#fff}
.toast-text{font-size:14px;font-weight:600;line-height:1.4}

/* ===== POST FOOD FORM ===== */
.section-tabs{display:flex;gap:8px;margin-bottom:28px;flex-wrap:wrap}
.stab{padding:9px 22px;border-radius:50px;background:var(--glass);border:1px solid var(--border);color:rgba(255,255,255,0.6);font-size:13px;font-weight:600;cursor:pointer;transition:.25s;font-family:var(--font)}
.stab.active{background:linear-gradient(135deg,var(--green),var(--green2));color:#000;border-color:transparent}
.stab:hover:not(.active){background:var(--glass2)}

/* Freshness Gauge */
.gauge-wrap{position:relative;width:120px;height:65px;margin:0 auto}
.gauge-track{width:120px;height:60px;border-radius:60px 60px 0 0;overflow:hidden;position:relative;background:rgba(255,255,255,0.07)}
.gauge-fill{position:absolute;bottom:0;left:0;right:0;height:100%;background:conic-gradient(var(--green) 0deg,rgba(255,255,255,0.07) 0deg);transform-origin:center bottom;transition:1s ease;border-radius:60px 60px 0 0}
.gauge-val{text-align:center;font-size:18px;font-weight:800;margin-top:6px}

/* Table */
.data-table{width:100%;border-collapse:collapse}
.data-table th{font-size:12px;font-weight:700;text-transform:uppercase;letter-spacing:.8px;color:rgba(255,255,255,0.4);padding:10px 16px;text-align:left;border-bottom:1px solid var(--border)}
.data-table td{padding:14px 16px;font-size:14px;border-bottom:1px solid rgba(255,255,255,0.05)}
.data-table tr:last-child td{border-bottom:none}
.data-table tr:hover td{background:rgba(255,255,255,0.03)}

/* ===== NOTIFICATION BADGE ===== */
.notif-dot{width:8px;height:8px;background:var(--orange);border-radius:50%;display:inline-block;margin-left:4px;animation:blink 1.5s infinite}
@keyframes blink{0%,100%{opacity:1}50%{opacity:.3}}

/* Scroll bar */
::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-track{background:var(--g1)}
::-webkit-scrollbar-thumb{background:rgba(0,230,118,0.3);border-radius:3px}

/* ===== MODAL OVERLAY ===== */
.modal-overlay{position:fixed;inset:0;z-index:9000;display:flex;align-items:center;justify-content:center;padding:16px;opacity:0;pointer-events:none;transition:.3s}
.modal-overlay.open{opacity:1;pointer-events:all}
.modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,0.75);backdrop-filter:blur(8px)}
.modal-box{position:relative;z-index:1;background:linear-gradient(145deg,rgba(15,32,39,0.98),rgba(32,58,67,0.98));border:1px solid var(--border);border-radius:28px;width:100%;max-width:520px;max-height:90vh;overflow-y:auto;transform:translateY(30px) scale(.96);transition:.35s cubic-bezier(.34,1.56,.64,1)}
.modal-overlay.open .modal-box{transform:translateY(0) scale(1)}
.modal-box::-webkit-scrollbar{width:4px}
.modal-box::-webkit-scrollbar-thumb{background:rgba(0,230,118,0.2);border-radius:2px}
.modal-head{padding:28px 28px 0;display:flex;align-items:flex-start;justify-content:space-between;gap:12px}
.modal-head h2{font-size:22px;font-weight:800;line-height:1.2}
.modal-head p{font-size:13px;color:rgba(255,255,255,0.5);margin-top:4px}
.modal-close{width:36px;height:36px;border-radius:50%;background:rgba(255,255,255,0.08);border:1px solid var(--border);color:rgba(255,255,255,0.6);font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:.2s;flex-shrink:0}
.modal-close:hover{background:rgba(255,255,255,0.15);color:#fff}
.modal-body{padding:24px 28px 32px}

/* Order summary strip */
.order-strip{display:flex;align-items:center;gap:14px;padding:14px 18px;background:rgba(0,230,118,0.07);border:1px solid rgba(0,230,118,0.18);border-radius:16px;margin-bottom:24px}
.order-strip .os-emoji{font-size:38px;width:54px;height:54px;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,0.06);border-radius:12px}
.order-strip .os-info{flex:1}
.order-strip .os-info h4{font-size:17px;font-weight:700;margin-bottom:2px}
.order-strip .os-info p{font-size:13px;color:rgba(255,255,255,0.5)}
.order-strip .os-price{font-size:22px;font-weight:800;color:var(--green)}

/* Qty selector */
.qty-row{display:flex;align-items:center;justify-content:space-between;margin-bottom:22px}
.qty-row label{font-size:13px;font-weight:600;color:rgba(255,255,255,0.7)}
.qty-ctrl{display:flex;align-items:center;gap:0;background:rgba(255,255,255,0.06);border:1px solid var(--border);border-radius:12px;overflow:hidden}
.qty-btn{width:36px;height:36px;border:none;background:transparent;color:#fff;font-size:20px;cursor:pointer;transition:.2s;font-family:var(--font)}
.qty-btn:hover{background:rgba(0,230,118,0.15);color:var(--green)}
.qty-num{width:44px;text-align:center;font-size:17px;font-weight:700;color:#fff;background:transparent;border:none;border-left:1px solid var(--border);border-right:1px solid var(--border);padding:8px 0;font-family:var(--font)}
.qty-num:focus{outline:none}

/* Section divider */
.sdiv{font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:1.2px;color:rgba(255,255,255,0.35);margin:18px 0 12px;display:flex;align-items:center;gap:10px}
.sdiv::after{content:'';flex:1;height:1px;background:var(--border)}

/* Address fields */
.addr-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:4px}
.addr-grid .full{grid-column:1/-1}
.af{display:flex;flex-direction:column;gap:5px}
.af label{font-size:12px;font-weight:600;color:rgba(255,255,255,0.55);letter-spacing:.3px}
.af input,.af select{padding:11px 14px;background:rgba(255,255,255,0.07);border:1.5px solid var(--border);border-radius:12px;color:#fff;font-size:14px;font-family:var(--font);transition:.25s}
.af input::placeholder{color:rgba(255,255,255,0.25)}
.af input:focus,.af select:focus{outline:none;border-color:var(--green);background:rgba(0,230,118,0.05)}
.af select option{background:#1a2e38}

/* Payment methods */
.pay-methods{display:flex;flex-direction:column;gap:10px;margin-bottom:6px}
.pay-opt{display:flex;align-items:center;gap:14px;padding:14px 16px;border:2px solid var(--border);border-radius:16px;cursor:pointer;transition:.25s;position:relative}
.pay-opt:hover{border-color:rgba(0,230,118,0.4);background:rgba(0,230,118,0.04)}
.pay-opt.selected{border-color:var(--green);background:rgba(0,230,118,0.08)}
.pay-opt input[type=radio]{display:none}
.pay-radio{width:20px;height:20px;border-radius:50%;border:2px solid rgba(255,255,255,0.3);display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:.25s}
.pay-opt.selected .pay-radio{border-color:var(--green);background:var(--green)}
.pay-opt.selected .pay-radio::after{content:'';width:8px;height:8px;border-radius:50%;background:#000;display:block}
.pay-ico{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0}
.pay-label{flex:1}
.pay-label h4{font-size:15px;font-weight:700;margin-bottom:2px}
.pay-label p{font-size:12px;color:rgba(255,255,255,0.45)}
.pay-badge{font-size:10px;font-weight:700;padding:3px 9px;border-radius:50px;background:rgba(0,230,118,0.15);color:var(--green);border:1px solid rgba(0,230,118,0.25)}

/* UPI section */
.upi-section{display:none;margin-top:14px;padding:16px;background:rgba(255,255,255,0.04);border-radius:14px;border:1px solid var(--border)}
.upi-section.show{display:block}
.upi-apps{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:14px}
.upi-app{display:flex;flex-direction:column;align-items:center;gap:6px;padding:10px 14px;background:rgba(255,255,255,0.06);border:1.5px solid var(--border);border-radius:14px;cursor:pointer;transition:.25s;min-width:68px}
.upi-app.active{border-color:var(--green);background:rgba(0,230,118,0.08)}
.upi-app:hover{background:rgba(255,255,255,0.1)}
.upi-app .ua-ico{font-size:26px}
.upi-app .ua-name{font-size:11px;font-weight:600;color:rgba(255,255,255,0.7)}
.upi-id-wrap{position:relative}
.upi-id-wrap input{width:100%;padding:11px 44px 11px 14px;background:rgba(255,255,255,0.07);border:1.5px solid var(--border);border-radius:12px;color:#fff;font-size:14px;font-family:var(--font);transition:.25s}
.upi-id-wrap input:focus{outline:none;border-color:var(--green)}
.upi-id-wrap input::placeholder{color:rgba(255,255,255,0.25)}
.upi-id-verify{position:absolute;right:10px;top:50%;transform:translateY(-50%);background:var(--green);border:none;border-radius:8px;padding:4px 10px;font-size:11px;font-weight:700;color:#000;cursor:pointer;font-family:var(--font)}
.qr-wrap{margin-top:14px;text-align:center}
.qr-box{width:120px;height:120px;margin:0 auto 8px;border-radius:14px;background:#fff;padding:10px;display:flex;align-items:center;justify-content:center}
.qr-box svg{width:100%;height:100%}
.qr-label{font-size:12px;color:rgba(255,255,255,0.5)}

/* Card section */
.card-section{display:none;margin-top:14px;padding:16px;background:rgba(255,255,255,0.04);border-radius:14px;border:1px solid var(--border)}
.card-section.show{display:block}
.card-visual{background:linear-gradient(135deg,#1a1a2e,#16213e,#0f3460);border-radius:16px;padding:20px;margin-bottom:16px;position:relative;overflow:hidden;height:120px}
.card-visual::before{content:'';position:absolute;top:-30px;right:-30px;width:120px;height:120px;border-radius:50%;background:rgba(0,230,118,0.08)}
.card-visual::after{content:'';position:absolute;bottom:-40px;left:20px;width:100px;height:100px;border-radius:50%;background:rgba(124,77,255,0.08)}
.cv-chip{width:32px;height:24px;background:linear-gradient(135deg,#ffd600,#ff9100);border-radius:5px;margin-bottom:14px;position:relative;z-index:1}
.cv-num{font-size:16px;font-weight:600;letter-spacing:3px;color:rgba(255,255,255,0.9);position:relative;z-index:1;font-family:monospace}
.cv-row{display:flex;justify-content:space-between;margin-top:10px;position:relative;z-index:1}
.cv-row span{font-size:10px;color:rgba(255,255,255,0.5);text-transform:uppercase;display:block;margin-bottom:2px}
.cv-row b{font-size:13px;font-weight:700}

/* COD section */
.cod-section{display:none;margin-top:14px;padding:14px 16px;background:rgba(255,214,0,0.06);border:1px solid rgba(255,214,0,0.2);border-radius:14px;font-size:13px;color:rgba(255,255,255,0.7);line-height:1.6}
.cod-section.show{display:block}

/* Bill section */
.bill-box{background:rgba(255,255,255,0.04);border-radius:16px;padding:16px 18px;margin-top:20px}
.bill-row{display:flex;justify-content:space-between;font-size:14px;padding:5px 0;color:rgba(255,255,255,0.7)}
.bill-row.total{border-top:1px solid var(--border);margin-top:6px;padding-top:10px;font-size:17px;font-weight:800;color:#fff}
.bill-row.total span:last-child{color:var(--green)}

/* Place order btn */
.btn-place-order{width:100%;padding:16px;border:none;border-radius:16px;background:linear-gradient(135deg,var(--green),var(--green2));color:#000;font-size:17px;font-weight:800;cursor:pointer;transition:.3s;font-family:var(--font);margin-top:20px;position:relative;overflow:hidden}
.btn-place-order:hover{transform:translateY(-2px);box-shadow:0 10px 36px rgba(0,230,118,0.4)}
.btn-place-order::after{content:'';position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent);transform:translateX(-100%);transition:.5s}
.btn-place-order:hover::after{transform:translateX(100%)}

/* ===== TRACKING MODAL ===== */
#trackingModal .modal-box{max-width:560px}
.track-order-id{display:inline-block;padding:5px 16px;background:rgba(0,230,118,0.12);border:1px solid rgba(0,230,118,0.25);border-radius:50px;font-size:12px;font-weight:700;color:var(--green);letter-spacing:.5px;margin-bottom:20px}

/* Map simulation */
.track-map{border-radius:18px;overflow:hidden;height:160px;position:relative;background:linear-gradient(135deg,#0d2137,#1a3a52);margin-bottom:22px;border:1px solid var(--border)}
.map-grid{position:absolute;inset:0;opacity:.15}
.map-road-h{position:absolute;left:0;right:0;height:2px;background:rgba(255,255,255,0.6)}
.map-road-v{position:absolute;top:0;bottom:0;width:2px;background:rgba(255,255,255,0.6)}
.map-road-h.main{height:6px;background:rgba(255,255,255,0.9)}
.map-road-v.main{width:6px;background:rgba(255,255,255,0.9)}
.map-pin{position:absolute;font-size:22px;transform:translate(-50%,-50%);z-index:3;filter:drop-shadow(0 2px 6px rgba(0,0,0,0.5))}
.map-pin.src{top:75%;left:15%}
.map-pin.dst{top:35%;left:82%}
.track-route{position:absolute;top:0;left:0;width:100%;height:100%;z-index:2}
.delivery-bike{position:absolute;font-size:28px;z-index:4;transform:translate(-50%,-50%);transition:all 1.5s cubic-bezier(.4,0,.2,1);filter:drop-shadow(0 2px 8px rgba(0,230,118,0.6))}
.map-labels{position:absolute;inset:0;z-index:3;pointer-events:none}
.map-lbl{position:absolute;font-size:10px;font-weight:700;color:rgba(255,255,255,0.7);background:rgba(0,0,0,0.5);padding:3px 7px;border-radius:6px;white-space:nowrap}

/* Delivery agent card */
.agent-card{display:flex;align-items:center;gap:16px;padding:16px 18px;background:rgba(255,255,255,0.05);border:1px solid var(--border);border-radius:18px;margin-bottom:22px}
.agent-avatar{width:56px;height:56px;border-radius:50%;background:linear-gradient(135deg,#7c4dff,#b388ff);display:flex;align-items:center;justify-content:center;font-size:24px;flex-shrink:0;border:2px solid rgba(124,77,255,0.4)}
.agent-info{flex:1}
.agent-info h4{font-size:16px;font-weight:700;margin-bottom:3px}
.agent-info .stars{color:#ffd600;font-size:13px;margin-bottom:4px}
.agent-info .vehicle{font-size:12px;color:rgba(255,255,255,0.5)}
.agent-actions{display:flex;flex-direction:column;gap:8px}
.btn-call{padding:8px 16px;background:linear-gradient(135deg,#00c853,#00bfa5);border:none;border-radius:10px;color:#000;font-size:13px;font-weight:700;cursor:pointer;display:flex;align-items:center;gap:6px;font-family:var(--font);white-space:nowrap}
.btn-msg{padding:8px 16px;background:rgba(255,255,255,0.08);border:1px solid var(--border);border-radius:10px;color:#fff;font-size:13px;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:6px;font-family:var(--font);white-space:nowrap}

/* ETA badge */
.eta-bar{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:rgba(0,230,118,0.06);border:1px solid rgba(0,230,118,0.18);border-radius:14px;margin-bottom:22px}
.eta-left{display:flex;align-items:center;gap:10px}
.eta-pulse{width:12px;height:12px;border-radius:50%;background:var(--green);animation:pulse-ring 1.5s infinite}
@keyframes pulse-ring{0%{box-shadow:0 0 0 0 rgba(0,230,118,0.6)}70%{box-shadow:0 0 0 8px rgba(0,230,118,0)}100%{box-shadow:0 0 0 0 rgba(0,230,118,0)}}
.eta-text{font-size:14px;font-weight:600}
.eta-time{font-size:22px;font-weight:800;color:var(--green)}

/* Step tracker */
.step-track{margin-bottom:8px}
.step-item{display:flex;gap:14px;position:relative;padding-bottom:4px}
.step-item:not(:last-child)::after{content:'';position:absolute;left:18px;top:38px;width:2px;height:calc(100% - 10px);background:var(--border);z-index:0;transition:.6s}
.step-item.done:not(:last-child)::after{background:var(--green)}
.step-item.active:not(:last-child)::after{background:linear-gradient(180deg,var(--green),var(--border))}
.step-dot-wrap{flex-shrink:0;display:flex;flex-direction:column;align-items:center;z-index:1}
.step-dot{width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:16px;border:2px solid var(--border);background:rgba(255,255,255,0.05);transition:.5s;flex-shrink:0}
.step-item.done .step-dot{background:var(--green);border-color:var(--green);color:#000}
.step-item.active .step-dot{background:rgba(0,230,118,0.15);border-color:var(--green);color:var(--green);animation:step-pulse 1.5s infinite}
@keyframes step-pulse{0%,100%{box-shadow:0 0 0 0 rgba(0,230,118,0.4)}50%{box-shadow:0 0 0 10px rgba(0,230,118,0)}}
.step-content{flex:1;padding:6px 0 20px}
.step-content h4{font-size:14px;font-weight:700;margin-bottom:3px;transition:.3s}
.step-item.pending .step-content h4{color:rgba(255,255,255,0.35)}
.step-content p{font-size:12px;color:rgba(255,255,255,0.4)}
.step-item.done .step-content p,.step-item.active .step-content p{color:rgba(255,255,255,0.6)}

/* Delivered celebration */
.delivery-done{display:none;text-align:center;padding:20px;animation:fadeUp .5s ease-out}
.delivery-done.show{display:block}
.delivery-done .big-icon{font-size:64px;margin-bottom:12px;animation:bounce 1s ease-out}
.delivery-done h3{font-size:22px;font-weight:800;color:var(--green);margin-bottom:6px}
.delivery-done p{color:rgba(255,255,255,0.6);font-size:14px}
.confetti-row{font-size:28px;letter-spacing:8px;margin-bottom:8px}
.btn-rate{margin-top:16px;padding:12px 32px;background:linear-gradient(135deg,#ffd600,#ff9100);border:none;border-radius:12px;color:#000;font-size:15px;font-weight:700;cursor:pointer;font-family:var(--font)}


/* ===== ORDER MODAL ===== */
.modal-overlay{position:fixed;inset:0;z-index:9000;background:rgba(5,15,25,0.85);backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;padding:20px;opacity:0;pointer-events:none;transition:opacity .35s ease}
.modal-overlay.open{opacity:1;pointer-events:all}
.modal-box{width:100%;max-width:540px;max-height:92vh;overflow-y:auto;background:linear-gradient(160deg,#0d2030,#122535,#0f1e2c);border:1px solid rgba(0,230,118,0.2);border-radius:28px;box-shadow:0 30px 80px rgba(0,0,0,0.6),0 0 0 1px rgba(255,255,255,0.05);transform:translateY(30px) scale(.97);transition:transform .35s cubic-bezier(.175,.885,.32,1.275)}
.modal-overlay.open .modal-box{transform:translateY(0) scale(1)}
.modal-box::-webkit-scrollbar{width:4px}
.modal-box::-webkit-scrollbar-thumb{background:rgba(0,230,118,0.25);border-radius:2px}

/* Progress steps */
.checkout-steps{display:flex;align-items:center;padding:28px 32px 0;gap:0}
.cstep{display:flex;flex-direction:column;align-items:center;flex:1;position:relative}
.cstep:not(:last-child)::after{content:'';position:absolute;top:18px;left:50%;width:100%;height:2px;background:rgba(255,255,255,0.1);z-index:0}
.cstep.done:not(:last-child)::after,.cstep.active:not(:last-child)::after{background:linear-gradient(90deg,var(--green),rgba(0,230,118,0.3))}
.cstep-dot{width:36px;height:36px;border-radius:50%;border:2px solid rgba(255,255,255,0.15);background:rgba(255,255,255,0.06);display:flex;align-items:center;justify-content:center;font-size:15px;font-weight:700;color:rgba(255,255,255,0.35);z-index:1;transition:.3s;position:relative}
.cstep.active .cstep-dot{border-color:var(--green);background:rgba(0,230,118,0.15);color:var(--green);box-shadow:0 0 14px rgba(0,230,118,0.3)}
.cstep.done .cstep-dot{border-color:var(--green);background:linear-gradient(135deg,var(--green),var(--green2));color:#000}
.cstep-label{font-size:11px;font-weight:600;color:rgba(255,255,255,0.35);margin-top:6px;letter-spacing:.3px;text-align:center}
.cstep.active .cstep-label,.cstep.done .cstep-label{color:var(--green)}

/* Panes */
.checkout-pane{display:none;padding:28px 32px 32px;animation:paneIn .3s ease-out}
.checkout-pane.active{display:block}
@keyframes paneIn{from{opacity:0;transform:translateX(18px)}to{opacity:1;transform:translateX(0)}}
.pane-title{font-size:20px;font-weight:800;margin-bottom:6px}
.pane-sub{font-size:13px;color:rgba(255,255,255,0.5);margin-bottom:24px}

/* Item summary card inside modal */
.order-item-card{display:flex;align-items:center;gap:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.08);border-radius:18px;padding:16px 20px;margin-bottom:22px}
.oic-emoji{font-size:44px;line-height:1}
.oic-info{flex:1}
.oic-info h3{font-size:17px;font-weight:700;margin-bottom:4px}
.oic-info p{font-size:13px;color:rgba(255,255,255,0.5)}
.oic-price{font-size:22px;font-weight:800;color:var(--green)}

/* Qty stepper */
.qty-row{display:flex;align-items:center;justify-content:space-between;background:rgba(255,255,255,0.05);border:1px solid var(--border);border-radius:14px;padding:14px 18px;margin-bottom:18px}
.qty-label{font-size:14px;font-weight:600}
.qty-ctrl{display:flex;align-items:center;gap:14px}
.qty-btn{width:36px;height:36px;border-radius:50%;border:1.5px solid rgba(255,255,255,0.2);background:transparent;color:#fff;font-size:20px;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:.2s;line-height:1}
.qty-btn:hover{border-color:var(--green);color:var(--green);background:rgba(0,230,118,0.08)}
.qty-num{font-size:22px;font-weight:800;min-width:30px;text-align:center}
.order-total{display:flex;justify-content:space-between;align-items:center;background:rgba(0,230,118,0.08);border:1px solid rgba(0,230,118,0.2);border-radius:14px;padding:14px 18px}
.order-total .tot-label{font-size:14px;color:rgba(255,255,255,0.6)}
.order-total .tot-val{font-size:24px;font-weight:800;color:var(--green)}

/* Address fields */
.mfield{margin-bottom:16px}
.mfield label{display:block;font-size:12px;font-weight:700;color:rgba(255,255,255,0.55);margin-bottom:7px;letter-spacing:.4px;text-transform:uppercase}
.mfield input,.mfield select,.mfield textarea{width:100%;padding:13px 16px;background:rgba(255,255,255,0.07);border:1.5px solid var(--border);border-radius:13px;color:#fff;font-size:14px;font-family:var(--font);transition:.25s;resize:none}
.mfield input:focus,.mfield select:focus,.mfield textarea:focus{outline:none;border-color:var(--green);background:rgba(0,230,118,0.05);box-shadow:0 0 0 3px rgba(0,230,118,0.1)}
.mfield input::placeholder,.mfield textarea::placeholder{color:rgba(255,255,255,0.25)}
.mfield select option{background:#122535}
.field-2col{display:grid;grid-template-columns:1fr 1fr;gap:14px}

/* Payment methods */
.pay-methods{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:22px}
.pay-card{background:rgba(255,255,255,0.05);border:2px solid rgba(255,255,255,0.1);border-radius:16px;padding:18px 14px;text-align:center;cursor:pointer;transition:.25s}
.pay-card:hover{border-color:rgba(0,230,118,0.4);background:rgba(0,230,118,0.06)}
.pay-card.selected{border-color:var(--green);background:rgba(0,230,118,0.1);box-shadow:0 0 0 3px rgba(0,230,118,0.12)}
.pay-card .pay-ico{font-size:30px;margin-bottom:8px}
.pay-card .pay-name{font-size:13px;font-weight:700}
.pay-card .pay-desc{font-size:11px;color:rgba(255,255,255,0.45);margin-top:3px}

/* UPI panel */
.upi-panel{background:rgba(255,255,255,0.04);border:1px solid var(--border);border-radius:16px;padding:20px;margin-bottom:16px}
.upi-or{text-align:center;color:rgba(255,255,255,0.35);font-size:12px;margin:14px 0;position:relative}
.upi-or::before,.upi-or::after{content:'';position:absolute;top:50%;width:44%;height:1px;background:var(--border)}
.upi-or::before{left:0}.upi-or::after{right:0}
.qr-box{width:140px;height:140px;margin:0 auto 12px;background:#fff;border-radius:12px;padding:8px;display:flex;align-items:center;justify-content:center}
.qr-box svg{width:100%;height:100%}
.upi-id-badge{text-align:center;font-size:13px;font-weight:700;color:var(--green);background:rgba(0,230,118,0.1);border:1px solid rgba(0,230,118,0.2);border-radius:8px;padding:6px 14px;display:inline-block;margin:

/* ===== ORDER MODAL ===== */
.modal-overlay{position:fixed;inset:0;z-index:9000;background:rgba(5,15,22,0.82);backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;padding:20px;opacity:0;pointer-events:none;transition:opacity .35s ease}
.modal-overlay.open{opacity:1;pointer-events:all}
.modal-box{background:linear-gradient(160deg,#0d2233,#142a38);border:1px solid rgba(0,230,118,0.2);border-radius:32px;width:100%;max-width:560px;max-height:90vh;overflow-y:auto;padding:0;transform:translateY(40px) scale(.96);transition:transform .4s cubic-bezier(.175,.885,.32,1.275);box-shadow:0 30px 80px rgba(0,0,0,0.6),0 0 0 1px rgba(0,230,118,0.08)}
.modal-overlay.open .modal-box{transform:translateY(0) scale(1)}
.modal-box::-webkit-scrollbar{width:4px}
.modal-box::-webkit-scrollbar-thumb{background:rgba(0,230,118,0.2);border-radius:2px}

/* Modal Header */
.modal-head{padding:28px 32px 0;position:relative}
.modal-close{position:absolute;top:20px;right:22px;width:36px;height:36px;border-radius:50%;background:rgba(255,255,255,0.07);border:1px solid var(--border);color:rgba(255,255,255,0.6);font-size:16px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:.2s}
.modal-close:hover{background:rgba(244,67,30,0.2);color:#ff6b6b;border-color:rgba(244,67,30,0.3)}
.modal-food-preview{display:flex;align-items:center;gap:18px;margin-bottom:24px}
.modal-food-emoji{width:72px;height:72px;border-radius:20px;display:flex;align-items:center;justify-content:center;font-size:38px;flex-shrink:0}
.modal-food-info h3{font-size:22px;font-weight:800;margin-bottom:4px}
.modal-food-info .mprice{font-size:26px;font-weight:800;background:linear-gradient(90deg,var(--green),#64ffda);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.modal-food-info .msub{font-size:13px;color:rgba(255,255,255,0.45);margin-top:2px}
.modal-divider{height:1px;background:linear-gradient(90deg,transparent,rgba(0,230,118,0.2),transparent);margin:0 32px}

/* Modal Body */
.modal-body{padding:22px 32px 30px}
.modal-section{margin-bottom:24px}
.modal-section-title{font-size:13px;font-weight:700;text-transform:uppercase;letter-spacing:.8px;color:var(--green);margin-bottom:14px;display:flex;align-items:center;gap:8px}
.mfield-row{display:flex;gap:14px;flex-wrap:wrap}
.mfield{flex:1;min-width:160px;margin-bottom:14px}
.mfield label{display:block;font-size:12px;font-weight:600;color:rgba(255,255,255,0.55);margin-bottom:7px;letter-spacing:.3px}
.mfield input,.mfield select,.mfield textarea{width:100%;padding:12px 16px;background:rgba(255,255,255,0.07);border:1.5px solid rgba(255,255,255,0.1);border-radius:14px;color:#fff;font-size:14px;font-family:var(--font);transition:.25s;resize:none}
.mfield input:focus,.mfield select:focus,.mfield textarea:focus{outline:none;border-color:var(--green);background:rgba(0,230,118,0.06);box-shadow:0 0 0 3px rgba(0,230,118,0.1)}
.mfield input::placeholder,.mfield textarea::placeholder{color:rgba(255,255,255,0.25)}
.mfield select option{background:#0d2233;color:#fff}

/* Qty stepper */
.qty-stepper{display:flex;align-items:center;gap:0;background:rgba(255,255,255,0.07);border:1.5px solid rgba(255,255,255,0.1);border-radius:14px;overflow:hidden;width:fit-content}
.qty-btn{width:42px;height:44px;background:transparent;border:none;color:#fff;font-size:20px;cursor:pointer;transition:.2s;display:flex;align-items:center;justify-content:center;font-family:var(--font)}
.qty-btn:hover{background:rgba(0,230,118,0.15);color:var(--green)}
.qty-val{width:52px;text-align:center;font-size:16px;font-weight:700;padding:0;background:transparent;border:none;border-left:1px solid rgba(255,255,255,0.1);border-right:1px solid rgba(255,255,255,0.1);color:#fff;height:44px;line-height:44px;font-family:var(--font)}

/* Payment options */
.pay-options{display:flex;gap:10px;flex-wrap:wrap}
.pay-opt{flex:1;min-width:100px;padding:12px 10px;background:rgba(255,255,255,0.05);border:2px solid rgba(255,255,255,0.09);border-radius:14px;cursor:pointer;text-align:center;transition:.25s}
.pay-opt:hover{border-color:rgba(0,230,118,0.3);background:rgba(0,230,118,0.05)}
.pay-opt.selected{border-color:var(--green);background:rgba(0,230,118,0.1)}
.pay-opt .poi{font-size:22px;margin-bottom:5px}
.pay-opt .pol{font-size:11px;font-weight:700;color:rgba(255,255,255,0.7)}

/* Delivery type toggle */
.delivery-toggle{display:flex;gap:10px}
.del-opt{flex:1;padding:14px 10px;background:rgba(255,255,255,0.05);border:2px solid rgba(255,255,255,0.09);border-radius:14px;cursor:pointer;text-align:center;transition:.25s}
.del-opt:hover{border-color:rgba(0,230,118,0.3)}
.del-opt.selected{border-color:var(--green);background:rgba(0,230,118,0.08)}
.del-opt .di{font-size:26px;margin-bottom:6px}
.del-opt .dl{font-size:13px;font-weight:700}
.del-opt .ds{font-size:11px;color:rgba(255,255,255,0.45);margin-top:2px}

/* Order Summary */
.order-summary{background:rgba(0,230,118,0.05);border:1px solid rgba(0,230,118,0.15);border-radius:18px;padding:18px 20px;margin-bottom:22px}
.os-row{display:flex;justify-content:space-between;align-items:center;padding:6px 0;font-size:14px;color:rgba(255,255,255,0.7)}
.os-row.total{border-top:1px solid rgba(0,230,118,0.15);margin-top:8px;padding-top:12px;font-size:16px;font-weight:800;color:#fff}
.os-row.total span:last-child{color:var(--green);font-size:18px}

/* Confirm button */
.btn-confirm{width:100%;padding:16px;border:none;border-radius:16px;background:linear-gradient(135deg,var(--green),var(--green2));color:#000;font-size:16px;font-weight:800;cursor:pointer;transition:.3s;font-family:var(--font);position:relative;overflow:hidden;letter-spacing:.3px}
.btn-confirm:hover{transform:translateY(-2px);box-shadow:0 10px 36px rgba(0,230,118,0.4)}
.btn-confirm::after{content:'';position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.25),transparent);transform:translateX(-100%);transition:.5s}
.btn-confirm:hover::after{transform:translateX(100%)}
.btn-confirm:disabled{opacity:.5;cursor:not-allowed;transform:none}

/* Success animation */
.order-success{text-align:center;padding:20px 0}
.success-ring{width:100px;height:100px;border-radius:50%;background:linear-gradient(135deg,rgba(0,230,118,0.2),rgba(0,191,165,0.2));border:3px solid var(--green);display:flex;align-items:center;justify-content:center;margin:0 auto 20px;font-size:44px;animation:popIn .5s cubic-bezier(.175,.885,.32,1.275)}
@keyframes popIn{from{transform:scale(0);opacity:0}to{transform:scale(1);opacity:1}}
.order-success h3{font-size:24px;font-weight:800;margin-bottom:8px;color:var(--green)}
.order-success p{color:rgba(255,255,255,0.6);font-size:14px;line-height:1.6;margin-bottom:20px}
.order-id{display:inline-block;padding:6px 18px;background:rgba(0,230,118,0.1);border:1px solid rgba(0,230,118,0.2);border-radius:50px;font-size:13px;font-weight:700;color:var(--green);margin-bottom:20px}
.btn-track{padding:12px 32px;background:linear-gradient(135deg,var(--orange),#ff9100);color:#fff;border:none;border-radius:12px;font-size:15px;font-weight:700;cursor:pointer;font-family:var(--font);transition:.3s}
.btn-track:hover{transform:translateY(-2px);box-shadow:0 6px 22px rgba(255,109,0,0.4)}

/* ===== RESPONSIVE ===== */
@media(max-width:768px){
  .header{padding:12px 16px}
  .lang-switcher{display:none}
  .header-nav .nav-pill:not(:last-child){display:none}
  .dash-stats{gap:10px}
  .dstat{min-width:120px;padding:16px}
  .auth-box{padding:36px 24px}
  .section-tabs{overflow-x:auto;flex-wrap:nowrap;padding-bottom:4px}
}
</style>
</head>
<body>
<canvas id="bgCanvas"></canvas>

<!-- HEADER -->
<header class="header">
  <div class="logo" onclick="goHome()">
    <div class="logo-icon">ðŸ½ï¸</div>
    <div class="logo-text" data-i18n="brand">FoodSave</div>
  </div>
  <div class="header-right">
    <div class="lang-switcher">
      <button class="lang-btn active" onclick="setLang('en')">EN</button>
      <button class="lang-btn" onclick="setLang('hi')">à¤¹à¤¿</button>
      <button class="lang-btn" onclick="setLang('te')">à°¤à±†</button>
    </div>
    <div class="header-nav" id="headerNav">
      <button class="nav-pill" onclick="goHome()" data-i18n="nav_home">Home</button>
      <button class="nav-pill green" id="authNavBtn" onclick="goHome()" data-i18n="nav_login">Login</button>
    </div>
  </div>
</header>

<!-- BACK BUTTON -->
<button class="back-floating" id="backBtn" onclick="goBack()" style="display:none" title="Go Back">
  <i class="fas fa-arrow-left"></i>
</button>

<!-- ========== HOME ========== -->
<section id="sec_home" class="section active">
  <div class="hero">
    <div class="hero-badge">ðŸŒ± <span data-i18n="hero_badge">Zero Waste Initiative</span></div>
    <h1 data-i18n="hero_h1">Save Food,<br><span>Save Lives</span></h1>
    <p data-i18n="hero_p">Join our mission to reduce food wastage and feed those in need. Together, one meal at a time.</p>
    <div class="hero-btns">
      <button class="btn-hero primary" onclick="showSection('sec_auth')" data-i18n="hero_join">Get Started</button>
      <button class="btn-hero outline" onclick="showSection('sec_consumer')" data-i18n="hero_browse">Browse Food</button>
    </div>
  </div>
  <div class="stats-row">
    <div class="stat-bubble"><div class="ico">ðŸ¤</div><div class="num" data-count="1247">0</div><div class="lbl" data-i18n="stat_donors">Donors</div></div>
    <div class="stat-bubble"><div class="ico">ðŸ²</div><div class="num" data-count="8543">0</div><div class="lbl" data-i18n="stat_meals">Meals Saved</div></div>
    <div class="stat-bubble"><div class="ico">ðŸ’š</div><div class="num" data-count="342">0</div><div class="lbl" data-i18n="stat_orgs">Organizations</div></div>
    <div class="stat-bubble"><div class="ico">â™»ï¸</div><div class="num" data-count="2680">0</div><div class="lbl" data-i18n="stat_kg">Kg Saved</div></div>
  </div>
  <div class="section-title"><h2 data-i18n="choose_role">Choose Your Role</h2><p data-i18n="choose_role_sub">How do you want to contribute?</p></div>
  <div class="roles">
    <div class="role-card admin" onclick="selectRole('admin')">
      <div class="role-ico">ðŸ›¡ï¸</div>
      <h3 data-i18n="r_admin">Admin</h3>
      <p data-i18n="r_admin_d">Manage platform operations, approve donors, and monitor system analytics</p>
      <div class="role-tag" data-i18n="r_admin_tag">PLATFORM MANAGEMENT</div>
    </div>
    <div class="role-card donor" onclick="selectRole('donor')">
      <div class="role-ico">ðŸ’š</div>
      <h3 data-i18n="r_donor">Donor</h3>
      <p data-i18n="r_donor_d">Donate surplus food, check freshness with sensors, and help reduce wastage</p>
      <div class="role-tag" data-i18n="r_donor_tag">FOOD CONTRIBUTOR</div>
    </div>
    <div class="role-card consumer" onclick="selectRole('consumer')">
      <div class="role-ico">ðŸ›’</div>
      <h3 data-i18n="r_consumer">Consumer</h3>
      <p data-i18n="r_consumer_d">Access affordable surplus food and contribute to zero wastage goal</p>
      <div class="role-tag" data-i18n="r_consumer_tag">FOOD SEEKER</div>
    </div>
  </div>
</section>

<!-- ========== AUTH ========== -->
<section id="sec_auth" class="section">
  <div class="auth-wrap">
    <div class="auth-box">
      <div class="auth-head">
        <div class="auth-ico" id="authIco" style="background:linear-gradient(135deg,#00c853,#00bfa5)">ðŸ½ï¸</div>
        <h2 id="authTitle" data-i18n="auth_title">Welcome to FoodSave</h2>
        <p id="authSub" data-i18n="auth_sub">Sign in or create an account</p>
      </div>
      <div class="tab-switch">
        <button class="tab-btn active" id="tabSignin" onclick="switchTab('signin')" data-i18n="tab_signin">Sign In</button>
        <button class="tab-btn" id="tabSignup" onclick="switchTab('signup')" data-i18n="tab_signup">Sign Up</button>
      </div>
      <!-- Sign In -->
      <div id="formSignin">
        <div class="form-field">
          <label data-i18n="lbl_username">Username / Email</label>
          <i class="fas fa-user fi"></i>
          <input type="text" id="si_user" placeholder="Enter username" autocomplete="off">
        </div>
        <div class="form-field">
          <label data-i18n="lbl_password">Password</label>
          <i class="fas fa-lock fi"></i>
          <input type="password" id="si_pass" placeholder="Enter password">
        </div>
        <button class="btn-auth green-btn" onclick="handleSignin()" data-i18n="btn_signin">Sign In â†’</button>
      </div>
      <!-- Sign Up -->
      <div id="formSignup" style="display:none">
        <div class="form-field">
          <label data-i18n="lbl_name">Full Name</label>
          <i class="fas fa-id-card fi"></i>
          <input type="text" id="su_name" placeholder="Enter full name">
        </div>
        <div class="form-field">
          <label data-i18n="lbl_email">Email</label>
          <i class="fas fa-envelope fi"></i>
          <input type="email" id="su_email" placeholder="Enter email">
        </div>
        <div class="form-field">
          <label data-i18n="lbl_phone">Phone</label>
          <i class="fas fa-phone fi"></i>
          <input type="tel" id="su_phone" placeholder="Enter phone number">
        </div>
        <div class="form-field">
          <label data-i18n="lbl_role">Role</label>
          <i class="fas fa-user-tag fi"></i>
          <select id="su_role">
            <option value="">Select role</option>
            <option value="donor">Donor</option>
            <option value="consumer">Consumer</option>
          </select>
        </div>
        <div class="form-field">
          <label data-i18n="lbl_password">Password</label>
          <i class="fas fa-lock fi"></i>
          <input type="password" id="su_pass" placeholder="Create password">
        </div>
        <button class="btn-auth green-btn" onclick="handleSignup()" data-i18n="btn_signup">Create Account â†’</button>
      </div>
    </div>
  </div>
</section>

<!-- ========== ADMIN DASHBOARD ========== -->
<section id="sec_admin" class="section">
  <div class="dash-wrap">
    <div class="dash-header">
      <div class="dash-title">ðŸ›¡ï¸ <span data-i18n="d_admin_title">Admin Dashboard</span><span data-i18n="d_admin_sub">Platform Management</span></div>
      <div style="display:flex;align-items:center;gap:12px">
        <div class="user-chip"><div class="user-avatar" style="background:linear-gradient(135deg,#5c35cc,#b388ff)">ðŸ›¡ï¸</div><span id="adminName">Admin</span></div>
        <button class="btn-logout" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</button>
      </div>
    </div>
    <div class="dash-stats">
      <div class="dstat green"><div class="dico">ðŸ¤</div><div class="dnum">24</div><div class="dlbl" data-i18n="d_donors">Total Donors</div></div>
      <div class="dstat blue"><div class="dico">ðŸ‘¥</div><div class="dnum">68</div><div class="dlbl" data-i18n="d_consumers">Consumers</div></div>
      <div class="dstat orange"><div class="dico">ðŸ“‹</div><div class="dnum">12</div><div class="dlbl" data-i18n="d_listings">Active Listings</div></div>
      <div class="dstat purple"><div class="dico">ðŸ’°</div><div class="dnum">â‚¹18,400</div><div class="dlbl" data-i18n="d_revenue">Total Revenue</div></div>
    </div>
    <div class="section-tabs">
      <button class="stab active" onclick="adminTab('pending')" data-i18n="tab_pending">Pending Approvals</button>
      <button class="stab" onclick="adminTab('transactions')" data-i18n="tab_tx">Transactions</button>
      <button class="stab" onclick="adminTab('users')" data-i18n="tab_users">Users</button>
    </div>
    <!-- Pending -->
    <div id="adminPending">
      <div class="pending-list" id="pendingList">
        <div class="pitem"><div class="pi-info"><h4>ðŸ¨ Hotel Sai Krishna</h4><p data-i18n="req_2h">Requested 2 hours ago â€¢ Downtown</p></div><div><button class="btn-approve" onclick="approveDonor(this,'Hotel Sai Krishna')"><i class="fas fa-check"></i> Approve</button><button class="btn-reject" onclick="rejectDonor(this)"><i class="fas fa-times"></i></button></div></div>
        <div class="pitem"><div class="pi-info"><h4>ðŸ« College Canteen</h4><p data-i18n="req_5h">Requested 5 hours ago â€¢ University Area</p></div><div><button class="btn-approve" onclick="approveDonor(this,'College Canteen')"><i class="fas fa-check"></i> Approve</button><button class="btn-reject" onclick="rejectDonor(this)"><i class="fas fa-times"></i></button></div></div>
        <div class="pitem"><div class="pi-info"><h4>ðŸ´ Spice Garden</h4><p>Requested 1 hour ago â€¢ City Center</p></div><div><button class="btn-approve" onclick="approveDonor(this,'Spice Garden')"><i class="fas fa-check"></i> Approve</button><button class="btn-reject" onclick="rejectDonor(this)"><i class="fas fa-times"></i></button></div></div>
      </div>
    </div>
    <!-- Transactions tab -->
    <div id="adminTransactions" style="display:none">
      <div class="card-glass"><div class="ch"><div class="ct" data-i18n="tx_title">All Transactions</div><div class="card-ico" style="background:linear-gradient(135deg,#7c4dff,#b388ff)">ðŸ’³</div></div>
      <div class="tx-list" id="allTxList"></div></div>
    </div>
    <!-- Users tab -->
    <div id="adminUsers" style="display:none">
      <div class="card-glass"><div class="ch"><div class="ct" data-i18n="users_title">Registered Users</div><div class="card-ico" style="background:linear-gradient(135deg,#0288d1,#4fc3f7)">ðŸ‘¥</div></div>
      <table class="data-table"><thead><tr><th>Name</th><th>Role</th><th>Joined</th><th>Status</th></tr></thead><tbody id="usersBody"></tbody></table></div>
    </div>
  </div>
</section>

<!-- ========== DONOR DASHBOARD ========== -->
<section id="sec_donor" class="section">
  <div class="dash-wrap">
    <div class="dash-header">
      <div class="dash-title">ðŸ’š <span data-i18n="d_donor_title">Donor Dashboard</span><span data-i18n="d_donor_sub">Manage Your Contributions</span></div>
      <div style="display:flex;align-items:center;gap:12px">
        <div class="user-chip"><div class="user-avatar" style="background:linear-gradient(135deg,#00c853,#00bfa5)">ðŸ’š</div><span id="donorName">Donor</span></div>
        <button class="btn-logout" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</button>
      </div>
    </div>
    <div class="dash-stats">
      <div class="dstat green"><div class="dico">ðŸ“¦</div><div class="dnum" id="dDonated">0</div><div class="dlbl" data-i18n="d_donated">Items Donated</div></div>
      <div class="dstat blue"><div class="dico">ðŸ’°</div><div class="dnum" id="dEarned">â‚¹0</div><div class="dlbl" data-i18n="d_earned">Total Earned</div></div>
      <div class="dstat orange"><div class="dico">ðŸ“‹</div><div class="dnum" id="dActive">0</div><div class="dlbl" data-i18n="d_active_list">Active Listings</div></div>
    </div>
    <div class="section-tabs">
      <button class="stab active" onclick="donorTab('surplus')" data-i18n="tab_surplus">Surplus Detection</button>
      <button class="stab" onclick="donorTab('freshness')" data-i18n="tab_freshness">Food Freshness</button>
      <button class="stab" onclick="donorTab('sell')" data-i18n="tab_sell">Sell Surplus</button>
      <button class="stab" onclick="donorTab('mytx')" data-i18n="tab_my_tx">My Transactions</button>
    </div>

    <!-- Surplus Detection -->
    <div id="tab_surplus_content">
      <div class="cg">
        <div class="card-glass">
          <div class="ch"><div class="ct" data-i18n="surplus_title">Surplus Calculator</div><div class="card-ico" style="background:linear-gradient(135deg,#ff6d00,#ff9100)">ðŸ§®</div></div>
          <div class="field-row">
            <div class="field-item"><label data-i18n="lbl_people">No. of People</label><input type="number" id="surPeople" placeholder="e.g. 50"></div>
            <div class="field-item"><label data-i18n="lbl_food_type">Food Type</label><input type="text" id="surFood" placeholder="e.g. Biryani"></div>
          </div>
          <button class="btn-calc" onclick="window.calcSurplus()"><i class="fas fa-calculator"></i> <span data-i18n="btn_calculate">Calculate</span></button>
          <div class="freshness-result" id="surResult"></div>
        </div>
        <div class="card-glass">
          <div class="ch"><div class="ct" data-i18n="surplus_tip">Tips to Reduce Waste</div><div class="card-ico" style="background:linear-gradient(135deg,#00bfa5,#64ffda)">ðŸ’¡</div></div>
          <div style="display:flex;flex-direction:column;gap:12px;margin-top:4px">
            <div style="padding:12px 16px;background:rgba(0,230,118,0.07);border-radius:12px;border-left:3px solid var(--green);font-size:13px;line-height:1.6" data-i18n="tip1">ðŸ“Š Cook 20% less than expected consumption â€” people often take less than prepared.</div>
            <div style="padding:12px 16px;background:rgba(0,230,118,0.07);border-radius:12px;border-left:3px solid var(--green2);font-size:13px;line-height:1.6" data-i18n="tip2">ðŸ§Š Store surplus immediately below 4Â°C to extend freshness by 3â€“5x.</div>
            <div style="padding:12px 16px;background:rgba(0,230,118,0.07);border-radius:12px;border-left:3px solid #64ffda;font-size:13px;line-height:1.6" data-i18n="tip3">â° Post surplus within 2 hours of preparation for maximum safety and value.</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Freshness -->
    <div id="tab_freshness_content" style="display:none">
      <div class="cg">
        <div class="card-glass">
          <div class="ch"><div class="ct" data-i18n="freshness_title">IoT Sensor Analysis</div><div class="card-ico" style="background:linear-gradient(135deg,#00c853,#69f0ae)">ðŸŒ¡ï¸</div></div>
          <div class="field-row">
            <div class="field-item"><label>ðŸŒ¡ï¸ <span data-i18n="lbl_temp">Temperature (Â°C)</span></label><input type="number" id="fTemp" placeholder="e.g. 25" oninput="updateMeter('temp',this.value)"></div>
            <div class="field-item"><label>ðŸ’§ <span data-i18n="lbl_humidity">Humidity (%)</span></label><input type="number" id="fHumidity" placeholder="e.g. 60" oninput="updateMeter('hum',this.value)"></div>
          </div>
          <div class="field-row">
            <!-- light level is not used by backend, removed for simplicity -->
            <!-- <div class="field-item"><label>â˜€ï¸ <span data-i18n="lbl_light">Light Level (lux)</span></label><input type="number" id="fLight" placeholder="e.g. 500" oninput="updateMeter('light',this.value)"></div> -->
            <!-- CO2 level is not used by API, removed -->
            <!-- <div class="field-item"><label>ðŸŒ«ï¸ <span data-i18n="lbl_co2">COâ‚‚ Level (ppm)</span></label><input type="number" id="fCO2" placeholder="e.g. 400" oninput="updateMeter('co2',this.value)"></div> -->
          </div>
          <div class="field-row">
            <div class="field-item"><label>â±ï¸ <span data-i18n="lbl_prep_time">When was it prepared?</span></label><input type="datetime-local" id="fPrep" placeholder="YYYY-MM-DDTHH:MM"></div>
            <div class="field-item"><label>ðŸ± <span data-i18n="lbl_food_type">Food Type</span></label><input type="text" id="fFoodType" placeholder="e.g. Rice"></div>
          </div>
          <button class="btn-calc" onclick="window.checkFreshness()"><i class="fas fa-microscope"></i> <span data-i18n="btn_analyze">Analyze Freshness</span></button>
          <div class="freshness-result" id="freshResult"></div>
        </div>
        <!-- Live meters -->
        <div class="card-glass">
          <div class="ch"><div class="ct" data-i18n="sensor_live">Live Sensor Readings</div><div class="card-ico" style="background:linear-gradient(135deg,#0288d1,#4fc3f7)">ðŸ“¡</div></div>
          <div class="sensor-meters">
            <div class="meter-item">
              <div class="m-label">ðŸŒ¡ï¸ Temperature</div>
              <div class="meter-bar"><div class="meter-fill" id="mTemp" style="width:0%;background:linear-gradient(90deg,#00e676,#ffd600,#f44336)"></div></div>
              <div class="meter-val" id="mTempVal">â€”</div>
            </div>
            <div class="meter-item">
              <div class="m-label">ðŸ’§ Humidity</div>
              <div class="meter-bar"><div class="meter-fill" id="mHum" style="width:0%;background:linear-gradient(90deg,#4fc3f7,#0288d1)"></div></div>
              <div class="meter-val" id="mHumVal">â€”</div>
            </div>
            <div class="meter-item">
              <div class="m-label">â˜€ï¸ Light (lux)</div>
              <div class="meter-bar"><div class="meter-fill" id="mLight" style="width:0%;background:linear-gradient(90deg,#ffd600,#ff9100)"></div></div>
              <div class="meter-val" id="mLightVal">â€”</div>
            </div>
            <div class="meter-item">
              <div class="m-label">ðŸŒ«ï¸ COâ‚‚ (ppm)</div>
              <div class="meter-bar"><div class="meter-fill" id="mCO2" style="width:0%;background:linear-gradient(90deg,#b388ff,#7c4dff)"></div></div>
              <div class="meter-val" id="mCO2Val">â€”</div>
            </div>
          </div>
          <div style="margin-top:16px;padding:14px;background:rgba(255,255,255,0.05);border-radius:14px;font-size:13px;color:rgba(255,255,255,0.55);line-height:1.7">
            <b style="color:rgba(255,255,255,0.8)" data-i18n="ideal_ranges">Ideal Ranges:</b><br>
            ðŸŒ¡ï¸ Temp: &lt;25Â°C &nbsp;|&nbsp; ðŸ’§ Humidity: 40â€“60% &nbsp;|&nbsp; â˜€ï¸ Light: &lt;1000 lux &nbsp;|&nbsp; ðŸŒ«ï¸ COâ‚‚: &lt;800 ppm
          </div>
        </div>
      </div>
    </div>

    <!-- Sell -->
    <div id="tab_sell_content" style="display:none">
      <div class="cg">
        <div class="card-glass">
          <div class="ch"><div class="ct" data-i18n="sell_title">Post Surplus Food</div><div class="card-ico" style="background:linear-gradient(135deg,#7c4dff,#b388ff)">ðŸ·ï¸</div></div>
          <div class="field-row">
            <div class="field-item"><label data-i18n="lbl_food_name">Food Name</label><input type="text" id="sellName" placeholder="e.g. Biryani"></div>
            <div class="field-item"><label data-i18n="lbl_qty">Quantity (plates/kg)</label><input type="number" id="sellQty" placeholder="e.g. 20"></div>
          </div>
          <div class="field-row">
            <div class="field-item"><label data-i18n="lbl_price">Price (â‚¹)</label><input type="number" id="sellPrice" placeholder="e.g. 60"></div>
            <div class="field-item"><label data-i18n="lbl_expiry">Expires In (hours)</label><input type="number" id="sellExpiry" placeholder="e.g. 4"></div>
          </div>
          <div class="field-row">
            <div class="field-item"><label data-i18n="lbl_pickup">Pickup Location</label><input type="text" id="sellLocation" placeholder="e.g. Hotel Sai Krishna, Downtown"></div>
          </div>
          <button class="btn-calc" onclick="postFood()"><i class="fas fa-upload"></i> <span data-i18n="btn_post">Post for Sale</span></button>
        </div>
        <div class="card-glass">
          <div class="ch"><div class="ct" data-i18n="my_listings">My Active Listings</div><div class="card-ico" style="background:linear-gradient(135deg,#ff6d00,#ff9100)">ðŸ“¦</div></div>
          <div id="myListings" style="display:flex;flex-direction:column;gap:12px"></div>
        </div>
      </div>
    </div>

    <!-- My Transactions -->
    <div id="tab_mytx_content" style="display:none">
      <div class="card-glass">
        <div class="ch"><div class="ct" data-i18n="my_tx">My Transactions</div><div class="card-ico" style="background:linear-gradient(135deg,#7c4dff,#b388ff)">ðŸ’³</div></div>
        <div class="tx-list" id="donorTxList"></div>
      </div>
    </div>
  </div>
</section>

<!-- ========== CONSUMER DASHBOARD ========== -->
<section id="sec_consumer" class="section">
  <div class="dash-wrap">
    <div class="dash-header">
      <div class="dash-title">ðŸ›’ <span data-i18n="d_consumer_title">Available Food</span><span data-i18n="d_consumer_sub">Fresh Surplus Near You</span></div>
      <div style="display:flex;align-items:center;gap:12px" id="consumerHeaderRight">
        <div class="user-chip" id="consumerChip" style="display:none"><div class="user-avatar" style="background:linear-gradient(135deg,#f4511e,#ffab91)">ðŸ›’</div><span id="consumerName">Guest</span></div>
        <button class="btn-logout" id="consumerLogoutBtn" style="display:none" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</button>
        <button class="nav-pill green" id="consumerLoginBtn" onclick="showSection('sec_auth')" data-i18n="btn_login_to_order">Login to Order</button>
      </div>
    </div>
    <div class="section-tabs">
      <button class="stab active" onclick="consumerTab('browse')" data-i18n="tab_browse">Browse Food</button>
      <button class="stab" id="myOrdersTab" onclick="consumerTab('orders')" data-i18n="tab_orders">My Orders</button>
    </div>
    <!-- Browse -->
    <div id="tab_browse_content">
      <div class="fg" id="foodGrid"></div>
    </div>
    <!-- Orders -->
    <div id="tab_orders_content" style="display:none">
      <div class="card-glass">
        <div class="ch"><div class="ct" data-i18n="my_orders">My Orders</div><div class="card-ico" style="background:linear-gradient(135deg,#f4511e,#ff9100)">ðŸ§¾</div></div>
        <div class="tx-list" id="consumerTxList"></div>
      </div>
    </div>
  </div>
</section>

<!-- ========== ORDER MODAL ========== -->
<div class="modal-overlay" id="orderModal">
  <div class="modal-backdrop" onclick="closeOrderModal()"></div>
  <div class="modal-box">
    <div class="modal-head">
      <div><h2>ðŸ›ï¸ Place Your Order</h2><p>Fill in your details to confirm</p></div>
      <button class="modal-close" onclick="closeOrderModal()"><i class="fas fa-times"></i></button>
    </div>
    <div class="modal-body">
      <!-- Food strip -->
      <div class="order-strip">
        <div class="os-emoji" id="om_emoji">ðŸ›</div>
        <div class="os-info"><h4 id="om_name">Biryani</h4><p id="om_donor">Hotel Sai Krishna â€¢ Downtown</p></div>
        <div class="os-price">â‚¹<span id="om_price">60</span></div>
      </div>

      <!-- Quantity -->
      <div class="qty-row">
        <label>Quantity</label>
        <div class="qty-ctrl">
          <button class="qty-btn" onclick="changeQty(-1)">âˆ’</button>
          <input class="qty-num" type="number" id="om_qty" value="1" min="1" max="20" oninput="updateBill()">
          <button class="qty-btn" onclick="changeQty(1)">+</button>
        </div>
      </div>

      <!-- Delivery Address -->
      <div class="sdiv">ðŸ“ Delivery Address</div>
      <div class="addr-grid">
        <div class="af full"><label>Full Name</label><input id="addr_name" placeholder="Receiver name" autocomplete="off"></div>
        <div class="af full"><label>Street Address</label><input id="addr_street" placeholder="House No., Street, Area" autocomplete="off"></div>
        <div class="af"><label>City</label><input id="addr_city" placeholder="City"></div>
        <div class="af"><label>Pincode</label><input id="addr_pin" placeholder="500001" maxlength="6"></div>
        <div class="af"><label>State</label>
          <select id="addr_state">
            <option value="">Select State</option>
            <option>Andhra Pradesh</option><option>Telangana</option><option>Tamil Nadu</option>
            <option>Karnataka</option><option>Maharashtra</option><option>Delhi</option>
            <option>West Bengal</option><option>Gujarat</option><option>Rajasthan</option><option>Other</option>
          </select>
        </div>
        <div class="af"><label>Phone</label><input id="addr_phone" placeholder="10-digit mobile" maxlength="10"></div>
      </div>

      <!-- Payment -->
      <div class="sdiv">ðŸ’³ Payment Method</div>
      <div class="pay-methods">
        <label class="pay-opt selected" id="pay_upi" onclick="selectPay('upi')">
          <div class="pay-radio"></div>
          <div class="pay-ico" style="background:linear-gradient(135deg,#7b2ff7,#f107a3)">â‚¿</div>
          <div class="pay-label"><h4>UPI Payment</h4><p>PhonePe, GPay, Paytm, BHIM</p></div>
          <span class="pay-badge">INSTANT</span>
        </label>
        <label class="pay-opt" id="pay_card" onclick="selectPay('card')">
          <div class="pay-radio"></div>
          <div class="pay-ico" style="background:linear-gradient(135deg,#1565c0,#42a5f5)">ðŸ’³</div>
          <div class="pay-label"><h4>Credit / Debit Card</h4><p>Visa, Mastercard, RuPay</p></div>
          <span class="pay-badge">SECURE</span>
        </label>
        <label class="pay-opt" id="pay_cod" onclick="selectPay('cod')">
          <div class="pay-radio"></div>
          <div class="pay-ico" style="background:linear-gradient(135deg,#e65100,#ff9800)">ðŸ’µ</div>
          <div class="pay-label"><h4>Cash on Delivery</h4><p>Pay when you receive</p></div>
          <span class="pay-badge">COD</span>
        </label>
      </div>

      <!-- UPI Details -->
      <div class="upi-section show" id="upi_section">
        <div class="sdiv" style="margin-top:0">Choose UPI App</div>
        <div class="upi-apps">
          <div class="upi-app active" onclick="selectUpiApp(this,'PhonePe')"><div class="ua-ico">ðŸŸ£</div><div class="ua-name">PhonePe</div></div>
          <div class="upi-app" onclick="selectUpiApp(this,'GPay')"><div class="ua-ico">ðŸ”µ</div><div class="ua-name">GPay</div></div>
          <div class="upi-app" onclick="selectUpiApp(this,'Paytm')"><div class="ua-ico">ðŸ”·</div><div class="ua-name">Paytm</div></div>
          <div class="upi-app" onclick="selectUpiApp(this,'BHIM')"><div class="ua-ico">ðŸŸ </div><div class="ua-name">BHIM</div></div>
        </div>
        <div style="margin-bottom:12px">
          <div class="af" style="margin-bottom:10px"><label>UPI ID</label>
            <div class="upi-id-wrap">
              <input id="upi_id" placeholder="yourname@upi" autocomplete="off">
              <button class="upi-id-verify" onclick="verifyUPI()">Verify</button>
            </div>
          </div>
        </div>
        <div class="qr-wrap">
          <div class="qr-label" style="margin-bottom:8px;font-size:12px;color:rgba(255,255,255,0.4)">â€” or scan QR to pay â€”</div>
          <div class="qr-box">
            <svg viewBox="0 0 37 37" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect width="37" height="37" fill="white"/>
              <!-- QR code pattern (decorative) -->
              <rect x="1" y="1" width="10" height="10" fill="#000"/><rect x="2" y="2" width="8" height="8" fill="white"/><rect x="3" y="3" width="6" height="6" fill="#000"/>
              <rect x="26" y="1" width="10" height="10" fill="#000"/><rect x="27" y="2" width="8" height="8" fill="white"/><rect x="28" y="3" width="6" height="6" fill="#000"/>
              <rect x="1" y="26" width="10" height="10" fill="#000"/><rect x="2" y="27" width="8" height="8" fill="white"/><rect x="3" y="28" width="6" height="6" fill="#000"/>
              <rect x="13" y="1" width="2" height="2" fill="#000"/><rect x="16" y="1" width="2" height="2" fill="#000"/><rect x="22" y="2" width="3" height="2" fill="#000"/>
              <rect x="13" y="4" width="3" height="2" fill="#000"/><rect x="18" y="5" width="2" height="3" fill="#000"/><rect x="22" y="5" width="2" height="2" fill="#000"/>
              <rect x="13" y="8" width="2" height="2" fill="#000"/><rect x="16" y="9" width="3" height="2" fill="#000"/><rect x="21" y="8" width="4" height="2" fill="#000"/>
              <rect x="13" y="13" width="2" height="3" fill="#000"/><rect x="17" y="13" width="3" height="2" fill="#000"/><rect x="22" y="13" width="2" height="3" fill="#000"/>
              <rect x="13" y="18" width="4" height="2" fill="#000"/><rect x="19" y="17" width="2" height="4" fill="#000"/><rect x="23" y="18" width="3" height="2" fill="#000"/>
              <rect x="1" y="13" width="3" height="2" fill="#000"/><rect x="5" y="13" width="2" height="4" fill="#000"/><rect x="8" y="14" width="3" height="2" fill="#000"/>
              <rect x="1" y="18" width="4" height="2" fill="#000"/><rect x="7" y="17" width="3" height="3" fill="#000"/><rect x="1" y="22" width="2" height="3" fill="#000"/>
              <rect x="4" y="21" width="4" height="2" fill="#000"/><rect x="9" y="22" width="2" height="3" fill="#000"/>
              <rect x="13" y="22" width="3" height="4" fill="#000"/><rect x="17" y="23" width="2" height="3" fill="#000"/><rect x="21" y="22" width="2" height="2" fill="#000"/>
              <rect x="24" y="21" width="3" height="3" fill="#000"/><rect x="28" y="13" width="3" height="2" fill="#000"/><rect x="32" y="13" width="4" height="2" fill="#000"/>
              <rect x="28" y="17" width="2" height="3" fill="#000"/><rect x="31" y="18" width="5" height="2" fill="#000"/>
              <rect x="26" y="21" width="2" height="4" fill="#000"/><rect x="30" y="22" width="3" height="2" fill="#000"/><rect x="34" y="21" width="2" height="5" fill="#000"/>
              <rect x="13" y="28" width="2" height="4" fill="#000"/><rect x="16" y="30" width="4" height="2" fill="#000"/><rect x="21" y="28" width="3" height="2" fill="#000"/>
              <rect x="22" y="31" width="2" height="5" fill="#000"/><rect x="25" y="30" width="4" height="2" fill="#000"/>
            </svg>
          </div>
          <div class="qr-label">foodsave@upi â€¢ â‚¹<span id="qr_amount">60</span></div>
        </div>
      </div>

      <!-- Card Details -->
      <div class="card-section" id="card_section">
        <div class="card-visual">
          <div class="cv-chip"></div>
          <div class="cv-num" id="cv_num">â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢</div>
          <div class="cv-row">
            <div><span>CARD HOLDER</span><b id="cv_holder">YOUR NAME</b></div>
            <div><span>EXPIRES</span><b id="cv_exp">MM/YY</b></div>
          </div>
        </div>
        <div class="addr-grid">
          <div class="af full"><label>Card Number</label><input id="c_num" placeholder="1234 5678 9012 3456" maxlength="19" oninput="formatCard(this)"></div>
          <div class="af full"><label>Card Holder Name</label><input id="c_name" placeholder="As on card" oninput="document.getElementById('cv_holder').textContent=this.value.toUpperCase()||'YOUR NAME'"></div>
          <div class="af"><label>Expiry (MM/YY)</label><input id="c_exp" placeholder="MM/YY" maxlength="5" oninput="formatExpiry(this)"></div>
          <div class="af"><label>CVV</label><input id="c_cvv" placeholder="â€¢â€¢â€¢" maxlength="3" type="password"></div>
        </div>
      </div>

      <!-- COD Info -->
      <div class="cod-section" id="cod_section">
        ðŸ’µ <b>Pay with cash</b> when our delivery partner arrives at your doorstep.<br>
        Please keep exact change ready. Contactless delivery available on request.
      </div>

      <!-- Bill -->
      <div class="bill-box">
        <div class="bill-row"><span>Item price Ã— <span id="b_qty">1</span></span><span>â‚¹<span id="b_subtotal">60</span></span></div>
        <div class="bill-row"><span>Delivery charge</span><span>â‚¹<span id="b_delivery">15</span></span></div>
        <div class="bill-row"><span>Platform fee</span><span>â‚¹5</span></div>
        <div class="bill-row total"><span>Total</span><span>â‚¹<span id="b_total">80</span></span></div>
      </div>

      <button class="btn-place-order" onclick="confirmOrder()">
        <i class="fas fa-check-circle"></i> Place Order â†’
      </button>
    </div>
  </div>
</div>

<!-- ========== TRACKING MODAL ========== -->
<div class="modal-overlay" id="trackingModal">
  <div class="modal-backdrop"></div>
  <div class="modal-box">
    <div class="modal-head">
      <div><h2>ðŸ“¦ Order Tracking</h2><p>Live delivery status</p></div>
      <button class="modal-close" onclick="closeTrackingModal()"><i class="fas fa-times"></i></button>
    </div>
    <div class="modal-body">
      <div class="track-order-id" id="track_order_id">Order #FS000000</div>

      <!-- ETA -->
      <div class="eta-bar">
        <div class="eta-left">
          <div class="eta-pulse"></div>
          <div class="eta-text" id="eta_text">Estimated Arrival</div>
        </div>
        <div class="eta-time" id="eta_value">~25 mins</div>
      </div>

      <!-- Map -->
      <div class="track-map">
        <div class="map-grid">
          <div class="map-road-h main" style="top:42%"></div>
          <div class="map-road-h" style="top:20%"></div>
          <div class="map-road-h" style="top:70%"></div>
          <div class="map-road-v main" style="left:60%"></div>
          <div class="map-road-v" style="left:25%"></div>
          <div class="map-road-v" style="left:80%"></div>
        </div>
        <!-- Route SVG -->
        <svg class="track-route" viewBox="0 0 560 160" preserveAspectRatio="none">
          <defs>
            <linearGradient id="routeGrad" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" style="stop-color:#00e676;stop-opacity:1"/>
              <stop offset="100%" style="stop-color:#00bfa5;stop-opacity:0.4"/>
            </linearGradient>
          </defs>
          <path id="routePath" d="M 84 120 C 180 120 220 67 336 67 S 440 56 459 56" stroke="url(#routeGrad)" stroke-width="3" fill="none" stroke-dasharray="8,5" stroke-linecap="round" opacity="0.8"/>
        </svg>
        <div class="map-pin src">ðŸ“</div>
        <div class="map-pin dst">ðŸ </div>
        <div class="delivery-bike" id="deliveryBike" style="left:15%;top:75%">ðŸ›µ</div>
        <div class="map-labels">
          <div class="map-lbl" style="bottom:8px;left:6%">Restaurant</div>
          <div class="map-lbl" style="top:8px;right:6%">Your Location</div>
        </div>
      </div>

      <!-- Delivery Agent -->
      <div class="agent-card">
        <div class="agent-avatar" id="agent_avatar">ðŸ§‘</div>
        <div class="agent-info">
          <h4 id="agent_name">Raju Kumar</h4>
          <div class="stars" id="agent_stars">â˜…â˜…â˜…â˜…Â½</div>
          <div class="vehicle" id="agent_vehicle">ðŸ›µ Honda Activa â€¢ KA-05-AB-1234</div>
        </div>
        <div class="agent-actions">
          <button class="btn-call" onclick="showToast('Calling delivery partner...','info')"><i class="fas fa-phone"></i> Call</button>
          <button class="btn-msg" onclick="showToast('Chat feature coming soon!','info')"><i class="fas fa-comment"></i> Chat</button>
        </div>
      </div>

      <!-- Step Tracker -->
      <div class="step-track" id="stepTrack">
        <div class="step-item done" id="step0">
          <div class="step-dot-wrap"><div class="step-dot">âœ“</div></div>
          <div class="step-content"><h4>Order Placed</h4><p id="st0_time">â€”</p></div>
        </div>
        <div class="step-item" id="step1">
          <div class="step-dot-wrap"><div class="step-dot">ðŸ“‹</div></div>
          <div class="step-content"><h4>Order Confirmed</h4><p>Restaurant acknowledged your order</p></div>
        </div>
        <div class="step-item pending" id="step2">
          <div class="step-dot-wrap"><div class="step-dot">ðŸ‘¨â€ðŸ³</div></div>
          <div class="step-content"><h4>Being Prepared</h4><p>Your food is being packed</p></div>
        </div>
        <div class="step-item pending" id="step3">
          <div class="step-dot-wrap"><div class="step-dot">ðŸ›µ</div></div>
          <div class="step-content"><h4>Picked Up</h4><p>Delivery partner has your order</p></div>
        </div>
        <div class="step-item pending" id="step4">
          <div class="step-dot-wrap"><div class="step-dot">ðŸš€</div></div>
          <div class="step-content"><h4>On the Way</h4><p>Arriving at your location</p></div>
        </div>
        <div class="step-item pending" id="step5">
          <div class="step-dot-wrap"><div class="step-dot">ðŸŽ‰</div></div>
          <div class="step-content"><h4>Delivered!</h4><p>Enjoy your meal</p></div>
        </div>
      </div>

      <!-- Delivered celebration (shown at the end) -->
      <div class="delivery-done" id="deliveryDone">
        <div class="confetti-row">ðŸŽ‰ ðŸŽŠ ðŸŽ‰</div>
        <div class="big-icon">âœ…</div>
        <h3>Order Delivered!</h3>
        <p>Your food has arrived. Enjoy your meal! ðŸ½ï¸</p>
        <button class="btn-rate" onclick="showToast('Thanks for rating! â­','success');closeTrackingModal()">â­ Rate your experience</button>
      </div>
    </div>
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast">
  <div class="toast-ico" id="toastIco"><i class="fas fa-check" id="toastIcon"></i></div>
  <div class="toast-text" id="toastMsg">Done!</div>
</div>

<script>
/* ============================================================
   DATA & STATE
============================================================ */
let currentUser = null;
let currentRole = null;
let sectionHistory = [];
let lang = 'en';

const translations = {
  en:{
    brand:'FoodSave',nav_home:'Home',nav_login:'Login',nav_logout:'Logout',
    hero_badge:'Zero Waste Initiative',
    hero_h1:'Save Food,<br><span>Save Lives</span>',
    hero_p:'Join our mission to reduce food wastage and feed those in need.',
    hero_join:'Get Started',hero_browse:'Browse Food',
    stat_donors:'Donors',stat_meals:'Meals Saved',stat_orgs:'Organizations',stat_kg:'Kg Saved',
    choose_role:'Choose Your Role',choose_role_sub:'How do you want to contribute?',
    r_admin:'Admin',r_admin_d:'Manage platform, approve donors, monitor analytics',r_admin_tag:'PLATFORM MANAGEMENT',
    r_donor:'Donor',r_donor_d:'Donate surplus food, check freshness with sensors',r_donor_tag:'FOOD CONTRIBUTOR',
    r_consumer:'Consumer',r_consumer_d:'Access affordable surplus food near you',r_consumer_tag:'FOOD SEEKER',
    auth_title:'Welcome to FoodSave',auth_sub:'Sign in or create an account',
    tab_signin:'Sign In',tab_signup:'Sign Up',
    lbl_username:'Username / Email',lbl_password:'Password',lbl_role:'Role',
    lbl_name:'Full Name',lbl_email:'Email',lbl_phone:'Phone',
    btn_signin:'Sign In â†’',btn_signup:'Create Account â†’',
    d_admin_title:'Admin Dashboard',d_admin_sub:'Platform Management',
    d_donors:'Total Donors',d_consumers:'Consumers',d_listings:'Active Listings',d_revenue:'Total Revenue',
    tab_pending:'Pending Approvals',tab_tx:'Transactions',tab_users:'Users',
    req_2h:'Requested 2 hours ago â€¢ Downtown',req_5h:'Requested 5 hours ago â€¢ University Area',
    tx_title:'All Transactions',users_title:'Registered Users',
    d_donor_title:'Donor Dashboard',d_donor_sub:'Manage Your Contributions',
    d_donated:'Items Donated',d_earned:'Total Earned',d_active_list:'Active Listings',
    tab_surplus:'Surplus Detection',tab_freshness:'Food Freshness',tab_sell:'Sell Surplus',tab_my_tx:'My Transactions',
    surplus_title:'Surplus Calculator',surplus_tip:'Tips to Reduce Waste',
    lbl_people:'No. of People',lbl_food_type:'Food Type',lbl_prepared:'Prepared Qty (kg)',lbl_consumed:'Consumed (%)',
    btn_calculate:'Calculate',
    tip1:'ðŸ“Š Cook 20% less than expected â€” people often take less than prepared.',
    tip2:'ðŸ§Š Store surplus below 4Â°C to extend freshness by 3â€“5x.',
    tip3:'â° Post surplus within 2 hours for maximum safety and value.',
    freshness_title:'IoT Sensor Analysis',sensor_live:'Live Sensor Readings',ideal_ranges:'Ideal Ranges:',
    lbl_temp:'Temperature (Â°C)',lbl_humidity:'Humidity (%)',lbl_light:'Light Level (lux)',lbl_co2:'COâ‚‚ Level (ppm)',
    lbl_prep_time:'Prepared (hours ago)',btn_analyze:'Analyze Freshness',
    sell_title:'Post Surplus Food',lbl_food_name:'Food Name',lbl_qty:'Quantity (plates/kg)',
    lbl_price:'Price (â‚¹)',lbl_expiry:'Expires In (hours)',lbl_pickup:'Pickup Location',btn_post:'Post for Sale',
    my_listings:'My Active Listings',my_tx:'My Transactions',
    d_consumer_title:'Available Food',d_consumer_sub:'Fresh Surplus Near You',
    tab_browse:'Browse Food',tab_orders:'My Orders',
    btn_login_to_order:'Login to Order',my_orders:'My Orders',
  },
  hi:{
    brand:'à¤«à¥‚à¤¡à¤¸à¥‡à¤µ',nav_home:'à¤¹à¥‹à¤®',nav_login:'à¤²à¥‰à¤—à¤¿à¤¨',nav_logout:'à¤²à¥‰à¤—à¤†à¤‰à¤Ÿ',
    hero_badge:'à¤¶à¥‚à¤¨à¥à¤¯ à¤…à¤ªà¤¶à¤¿à¤·à¥à¤Ÿ à¤ªà¤¹à¤²',
    hero_h1:'à¤–à¤¾à¤¨à¤¾ à¤¬à¤šà¤¾à¤à¤‚,<br><span>à¤œà¥€à¤µà¤¨ à¤¬à¤šà¤¾à¤à¤‚</span>',
    hero_p:'à¤–à¤¾à¤¦à¥à¤¯ à¤…à¤ªà¤µà¥à¤¯à¤¯ à¤•à¤® à¤•à¤°à¤¨à¥‡ à¤”à¤° à¤œà¤¼à¤°à¥‚à¤°à¤¤à¤®à¤‚à¤¦à¥‹à¤‚ à¤•à¥€ à¤®à¤¦à¤¦ à¤•à¤°à¤¨à¥‡ à¤•à¥‡ à¤¹à¤®à¤¾à¤°à¥‡ à¤®à¤¿à¤¶à¤¨ à¤®à¥‡à¤‚ à¤¶à¤¾à¤®à¤¿à¤² à¤¹à¥‹à¤‚à¥¤',
    hero_join:'à¤¶à¥à¤°à¥‚ à¤•à¤°à¥‡à¤‚',hero_browse:'à¤–à¤¾à¤¨à¤¾ à¤¦à¥‡à¤–à¥‡à¤‚',
    stat_donors:'à¤¦à¤¾à¤¨à¤•à¤°à¥à¤¤à¤¾',stat_meals:'à¤¬à¤šà¤¾à¤ à¤—à¤ à¤­à¥‹à¤œà¤¨',stat_orgs:'à¤¸à¤‚à¤—à¤ à¤¨',stat_kg:'à¤•à¤¿à¤—à¥à¤°à¤¾ à¤¬à¤šà¤¾à¤¯à¤¾',
    choose_role:'à¤…à¤ªà¤¨à¥€ à¤­à¥‚à¤®à¤¿à¤•à¤¾ à¤šà¥à¤¨à¥‡à¤‚',choose_role_sub:'à¤†à¤ª à¤•à¥ˆà¤¸à¥‡ à¤¯à¥‹à¤—à¤¦à¤¾à¤¨ à¤¦à¥‡à¤¨à¤¾ à¤šà¤¾à¤¹à¤¤à¥‡ à¤¹à¥ˆà¤‚?',
    r_admin:'à¤µà¥à¤¯à¤µà¤¸à¥à¤¥à¤¾à¤ªà¤•',r_admin_d:'à¤ªà¥à¤²à¥‡à¤Ÿà¤«à¤¼à¥‰à¤°à¥à¤® à¤ªà¥à¤°à¤¬à¤‚à¤§à¤¨, à¤¦à¤¾à¤¨à¤•à¤°à¥à¤¤à¤¾à¤“à¤‚ à¤•à¥‹ à¤®à¤‚à¤œà¤¼à¥‚à¤°à¥€, à¤µà¤¿à¤¶à¥à¤²à¥‡à¤·à¤£',r_admin_tag:'à¤ªà¥à¤²à¥‡à¤Ÿà¤«à¤¼à¥‰à¤°à¥à¤® à¤ªà¥à¤°à¤¬à¤‚à¤§à¤¨',
    r_donor:'à¤¦à¤¾à¤¨à¤•à¤°à¥à¤¤à¤¾',r_donor_d:'à¤…à¤§à¤¿à¤¶à¥‡à¤· à¤­à¥‹à¤œà¤¨ à¤¦à¤¾à¤¨ à¤•à¤°à¥‡à¤‚, à¤¤à¤¾à¤œà¤¼à¤—à¥€ à¤œà¤¾à¤‚à¤šà¥‡à¤‚',r_donor_tag:'à¤–à¤¾à¤¦à¥à¤¯ à¤¯à¥‹à¤—à¤¦à¤¾à¤¨à¤•à¤°à¥à¤¤à¤¾',
    r_consumer:'à¤‰à¤ªà¤­à¥‹à¤•à¥à¤¤à¤¾',r_consumer_d:'à¤†à¤ªà¤•à¥‡ à¤ªà¤¾à¤¸ à¤•à¤¿à¤«à¤¼à¤¾à¤¯à¤¤à¥€ à¤…à¤§à¤¿à¤¶à¥‡à¤· à¤–à¤¾à¤¨à¤¾ à¤ªà¥à¤°à¤¾à¤ªà¥à¤¤ à¤•à¤°à¥‡à¤‚',r_consumer_tag:'à¤–à¤¾à¤¦à¥à¤¯ à¤–à¥‹à¤œà¤•à¤°à¥à¤¤à¤¾',
    auth_title:'à¤«à¥‚à¤¡à¤¸à¥‡à¤µ à¤®à¥‡à¤‚ à¤†à¤ªà¤•à¤¾ à¤¸à¥à¤µà¤¾à¤—à¤¤ à¤¹à¥ˆ',auth_sub:'à¤¸à¤¾à¤‡à¤¨ à¤‡à¤¨ à¤•à¤°à¥‡à¤‚ à¤¯à¤¾ à¤–à¤¾à¤¤à¤¾ à¤¬à¤¨à¤¾à¤à¤‚',
    tab_signin:'à¤¸à¤¾à¤‡à¤¨ à¤‡à¤¨',tab_signup:'à¤¸à¤¾à¤‡à¤¨ à¤…à¤ª',
    lbl_username:'à¤‰à¤ªà¤¯à¥‹à¤—à¤•à¤°à¥à¤¤à¤¾ à¤¨à¤¾à¤® / à¤ˆà¤®à¥‡à¤²',lbl_password:'à¤ªà¤¾à¤¸à¤µà¤°à¥à¤¡',lbl_role:'à¤­à¥‚à¤®à¤¿à¤•à¤¾',
    lbl_name:'à¤ªà¥‚à¤°à¤¾ à¤¨à¤¾à¤®',lbl_email:'à¤ˆà¤®à¥‡à¤²',lbl_phone:'à¤«à¤¼à¥‹à¤¨',
    btn_signin:'à¤¸à¤¾à¤‡à¤¨ à¤‡à¤¨ â†’',btn_signup:'à¤–à¤¾à¤¤à¤¾ à¤¬à¤¨à¤¾à¤à¤‚ â†’',
    d_admin_title:'à¤µà¥à¤¯à¤µà¤¸à¥à¤¥à¤¾à¤ªà¤• à¤¡à¥ˆà¤¶à¤¬à¥‹à¤°à¥à¤¡',d_admin_sub:'à¤ªà¥à¤²à¥‡à¤Ÿà¤«à¤¼à¥‰à¤°à¥à¤® à¤ªà¥à¤°à¤¬à¤‚à¤§à¤¨',
    d_donors:'à¤•à¥à¤² à¤¦à¤¾à¤¨à¤•à¤°à¥à¤¤à¤¾',d_consumers:'à¤‰à¤ªà¤­à¥‹à¤•à¥à¤¤à¤¾',d_listings:'à¤¸à¤•à¥à¤°à¤¿à¤¯ à¤²à¤¿à¤¸à¥à¤Ÿà¤¿à¤‚à¤—',d_revenue:'à¤•à¥à¤² à¤°à¤¾à¤œà¤¸à¥à¤µ',
    tab_pending:'à¤²à¤‚à¤¬à¤¿à¤¤ à¤…à¤¨à¥à¤®à¥‹à¤¦à¤¨',tab_tx:'à¤²à¥‡à¤¨à¤¦à¥‡à¤¨',tab_users:'à¤‰à¤ªà¤¯à¥‹à¤—à¤•à¤°à¥à¤¤à¤¾',
    req_2h:'2 à¤˜à¤‚à¤Ÿà¥‡ à¤ªà¤¹à¤²à¥‡ à¤…à¤¨à¥à¤°à¥‹à¤§ à¤•à¤¿à¤¯à¤¾ â€¢ à¤¡à¤¾à¤‰à¤¨à¤Ÿà¤¾à¤‰à¤¨',req_5h:'5 à¤˜à¤‚à¤Ÿà¥‡ à¤ªà¤¹à¤²à¥‡ â€¢ à¤µà¤¿à¤¶à¥à¤µà¤µà¤¿à¤¦à¥à¤¯à¤¾à¤²à¤¯ à¤•à¥à¤·à¥‡à¤¤à¥à¤°',
    tx_title:'à¤¸à¤­à¥€ à¤²à¥‡à¤¨à¤¦à¥‡à¤¨',users_title:'à¤ªà¤‚à¤œà¥€à¤•à¥ƒà¤¤ à¤‰à¤ªà¤¯à¥‹à¤—à¤•à¤°à¥à¤¤à¤¾',
    d_donor_title:'à¤¦à¤¾à¤¨à¤•à¤°à¥à¤¤à¤¾ à¤¡à¥ˆà¤¶à¤¬à¥‹à¤°à¥à¤¡',d_donor_sub:'à¤…à¤ªà¤¨à¥‡ à¤¯à¥‹à¤—à¤¦à¤¾à¤¨ à¤ªà¥à¤°à¤¬à¤‚à¤§à¤¿à¤¤ à¤•à¤°à¥‡à¤‚',
    d_donated:'à¤¦à¤¾à¤¨ à¤•à¤¿à¤ à¤—à¤ à¤†à¤‡à¤Ÿà¤®',d_earned:'à¤•à¥à¤² à¤•à¤®à¤¾à¤ˆ',d_active_list:'à¤¸à¤•à¥à¤°à¤¿à¤¯ à¤²à¤¿à¤¸à¥à¤Ÿà¤¿à¤‚à¤—',
    tab_surplus:'à¤…à¤§à¤¿à¤¶à¥‡à¤· à¤ªà¤¹à¤šà¤¾à¤¨',tab_freshness:'à¤–à¤¾à¤¦à¥à¤¯ à¤¤à¤¾à¤œà¤¼à¤—à¥€',tab_sell:'à¤…à¤§à¤¿à¤¶à¥‡à¤· à¤¬à¥‡à¤šà¥‡à¤‚',tab_my_tx:'à¤®à¥‡à¤°à¥‡ à¤²à¥‡à¤¨à¤¦à¥‡à¤¨',
    surplus_title:'à¤…à¤§à¤¿à¤¶à¥‡à¤· à¤•à¥ˆà¤²à¤•à¥à¤²à¥‡à¤Ÿà¤°',surplus_tip:'à¤¬à¤°à¥à¤¬à¤¾à¤¦à¥€ à¤•à¤® à¤•à¤°à¤¨à¥‡ à¤•à¥‡ à¤¸à¥à¤à¤¾à¤µ',
    lbl_people:'à¤²à¥‹à¤—à¥‹à¤‚ à¤•à¥€ à¤¸à¤‚à¤–à¥à¤¯à¤¾',lbl_food_type:'à¤–à¤¾à¤¦à¥à¤¯ à¤ªà¥à¤°à¤•à¤¾à¤°',lbl_prepared:'à¤¤à¥ˆà¤¯à¤¾à¤° à¤®à¤¾à¤¤à¥à¤°à¤¾ (à¤•à¤¿à¤—à¥à¤°à¤¾)',lbl_consumed:'à¤‰à¤ªà¤­à¥‹à¤— (%)',
    btn_calculate:'à¤—à¤£à¤¨à¤¾ à¤•à¤°à¥‡à¤‚',
    tip1:'ðŸ“Š à¤…à¤ªà¥‡à¤•à¥à¤·à¤¿à¤¤ à¤–à¤ªà¤¤ à¤¸à¥‡ 20% à¤•à¤® à¤ªà¤•à¤¾à¤à¤‚à¥¤',tip2:'ðŸ§Š à¤¤à¤¾à¤œà¤¼à¤—à¥€ à¤¬à¤¢à¤¼à¤¾à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ 4Â°C à¤¸à¥‡ à¤¨à¥€à¤šà¥‡ à¤¸à¥à¤Ÿà¥‹à¤° à¤•à¤°à¥‡à¤‚à¥¤',tip3:'â° à¤…à¤§à¤¿à¤•à¤¤à¤® à¤¸à¥à¤°à¤•à¥à¤·à¤¾ à¤•à¥‡ à¤²à¤¿à¤ 2 à¤˜à¤‚à¤Ÿà¥‡ à¤®à¥‡à¤‚ à¤ªà¥‹à¤¸à¥à¤Ÿ à¤•à¤°à¥‡à¤‚à¥¤',
    freshness_title:'IoT à¤¸à¥‡à¤‚à¤¸à¤° à¤µà¤¿à¤¶à¥à¤²à¥‡à¤·à¤£',sensor_live:'à¤²à¤¾à¤‡à¤µ à¤¸à¥‡à¤‚à¤¸à¤° à¤°à¥€à¤¡à¤¿à¤‚à¤—',ideal_ranges:'à¤†à¤¦à¤°à¥à¤¶ à¤¸à¥€à¤®à¤¾à¤à¤‚:',
    lbl_temp:'à¤¤à¤¾à¤ªà¤®à¤¾à¤¨ (Â°C)',lbl_humidity:'à¤†à¤°à¥à¤¦à¥à¤°à¤¤à¤¾ (%)',lbl_light:'à¤ªà¥à¤°à¤•à¤¾à¤¶ à¤¸à¥à¤¤à¤° (lux)',lbl_co2:'COâ‚‚ à¤¸à¥à¤¤à¤° (ppm)',
    lbl_prep_time:'à¤¤à¥ˆà¤¯à¤¾à¤°à¥€ (à¤˜à¤‚à¤Ÿà¥‡ à¤ªà¤¹à¤²à¥‡)',btn_analyze:'à¤¤à¤¾à¤œà¤¼à¤—à¥€ à¤µà¤¿à¤¶à¥à¤²à¥‡à¤·à¤£',
    sell_title:'à¤…à¤§à¤¿à¤¶à¥‡à¤· à¤–à¤¾à¤¨à¤¾ à¤ªà¥‹à¤¸à¥à¤Ÿ à¤•à¤°à¥‡à¤‚',lbl_food_name:'à¤–à¤¾à¤¨à¥‡ à¤•à¤¾ à¤¨à¤¾à¤®',lbl_qty:'à¤®à¤¾à¤¤à¥à¤°à¤¾',
    lbl_price:'à¤•à¥€à¤®à¤¤ (â‚¹)',lbl_expiry:'à¤¸à¤®à¤¾à¤ªà¥à¤¤à¤¿ (à¤˜à¤‚à¤Ÿà¥‹à¤‚ à¤®à¥‡à¤‚)',lbl_pickup:'à¤ªà¤¿à¤•à¤…à¤ª à¤¸à¥à¤¥à¤¾à¤¨',btn_post:'à¤¬à¤¿à¤•à¥à¤°à¥€ à¤•à¥‡ à¤²à¤¿à¤ à¤ªà¥‹à¤¸à¥à¤Ÿ',
    my_listings:'à¤®à¥‡à¤°à¥€ à¤¸à¤•à¥à¤°à¤¿à¤¯ à¤²à¤¿à¤¸à¥à¤Ÿà¤¿à¤‚à¤—',my_tx:'à¤®à¥‡à¤°à¥‡ à¤²à¥‡à¤¨à¤¦à¥‡à¤¨',
    d_consumer_title:'à¤‰à¤ªà¤²à¤¬à¥à¤§ à¤–à¤¾à¤¨à¤¾',d_consumer_sub:'à¤†à¤ªà¤•à¥‡ à¤ªà¤¾à¤¸ à¤¤à¤¾à¤œà¤¼à¤¾ à¤…à¤§à¤¿à¤¶à¥‡à¤·',
    tab_browse:'à¤–à¤¾à¤¨à¤¾ à¤¦à¥‡à¤–à¥‡à¤‚',tab_orders:'à¤®à¥‡à¤°à¥‡ à¤‘à¤°à¥à¤¡à¤°',
    btn_login_to_order:'à¤‘à¤°à¥à¤¡à¤° à¤•à¤°à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤²à¥‰à¤—à¤¿à¤¨',my_orders:'à¤®à¥‡à¤°à¥‡ à¤‘à¤°à¥à¤¡à¤°',
  },
  te:{
    brand:'à°«à±à°¡à±â€Œà°¸à±‡à°µà±',nav_home:'à°¹à±‹à°®à±',nav_login:'à°²à°¾à°—à°¿à°¨à±',nav_logout:'à°²à°¾à°—à±à°…à°µà±à°Ÿà±',
    hero_badge:'à°œà±€à°°à±‹ à°µà±‡à°¸à±à°Ÿà± à°šà±Šà°°à°µ',
    hero_h1:'à°†à°¹à°¾à°°à°‚ à°µà±ƒà°§à°¾ à°šà±‡à°¯à°•à°‚à°¡à°¿,<br><span>à°œà±€à°µà°¿à°¤à°¾à°²à± à°•à°¾à°ªà°¾à°¡à°‚à°¡à°¿</span>',
    hero_p:'à°†à°¹à°¾à°° à°µà±ƒà°§à°¾à°¨à± à°¤à°—à±à°—à°¿à°‚à°šà°¡à°¾à°¨à°¿à°•à°¿ à°®à°°à°¿à°¯à± à°…à°µà°¸à°°à°®à±ˆà°¨ à°µà°¾à°°à°¿à°•à°¿ à°¸à°¹à°¾à°¯à°‚ à°šà±‡à°¯à°¡à°¾à°¨à°¿à°•à°¿ à°®à°¾ à°®à°¿à°·à°¨à±â€Œà°²à±‹ à°šà±‡à°°à°‚à°¡à°¿.',
    hero_join:'à°ªà±à°°à°¾à°°à°‚à°­à°¿à°‚à°šà°‚à°¡à°¿',hero_browse:'à°†à°¹à°¾à°°à°‚ à°šà±‚à°¡à°‚à°¡à°¿',
    stat_donors:'à°¦à°¾à°¤à°²à±',stat_meals:'à°†à°¦à°¾ à°šà±‡à°¸à°¿à°¨ à°­à±‹à°œà°¨à°¾à°²à±',stat_orgs:'à°¸à°‚à°¸à±à°¥à°²à±',stat_kg:'à°†à°¦à°¾ à°šà±‡à°¸à°¿à°¨ à°•à°¿à°²à±‹à°²à±',
    choose_role:'à°®à±€ à°ªà°¾à°¤à±à°° à°Žà°‚à°šà±à°•à±‹à°‚à°¡à°¿',choose_role_sub:'à°®à±€à°°à± à°Žà°²à°¾ à°¸à°¹à°•à°°à°¿à°‚à°šà°¾à°²à°¨à±à°•à±à°‚à°Ÿà±à°¨à±à°¨à°¾à°°à±?',
    r_admin:'à°…à°¡à±à°®à°¿à°¨à±',r_admin_d:'à°µà±‡à°¦à°¿à°• à°¨à°¿à°°à±à°µà°¹à°£, à°¦à°¾à°¤à°²à°¨à± à°†à°®à±‹à°¦à°¿à°‚à°šà°¡à°‚',r_admin_tag:'à°µà±‡à°¦à°¿à°• à°¨à°¿à°°à±à°µà°¹à°£',
    r_donor:'à°¦à°¾à°¤',r_donor_d:'à°®à°¿à°—à±à°²à± à°†à°¹à°¾à°°à°‚ à°¦à°¾à°¨à°‚ à°šà±‡à°¯à°‚à°¡à°¿, à°¤à°¾à°œà°¾à°¦à°¨à°‚ à°¤à°¨à°¿à°–à±€ à°šà±‡à°¯à°‚à°¡à°¿',r_donor_tag:'à°†à°¹à°¾à°° à°¸à°¹à°¾à°¯à°•à±à°¡à±',
    r_consumer:'à°µà°¿à°¨à°¿à°¯à±‹à°—à°¦à°¾à°°à±',r_consumer_d:'à°®à±€ à°¦à°—à±à°—à°° à°…à°‚à°¦à±à°¬à°¾à°Ÿà±à°²à±‹ à°‰à°¨à±à°¨ à°®à°¿à°—à±à°²à± à°†à°¹à°¾à°°à°‚ à°ªà±Šà°‚à°¦à°‚à°¡à°¿',r_consumer_tag:'à°†à°¹à°¾à°°à°‚ à°µà±†à°¤à±à°•à±à°µà°¾à°°à±',
    auth_title:'à°«à±à°¡à±â€Œà°¸à±‡à°µà±â€Œà°•à± à°¸à±à°µà°¾à°—à°¤à°‚',auth_sub:'à°¸à±ˆà°¨à± à°‡à°¨à± à°šà±‡à°¯à°‚à°¡à°¿ à°²à±‡à°¦à°¾ à°…à°•à±Œà°‚à°Ÿà± à°¤à°¯à°¾à°°à± à°šà±‡à°¯à°‚à°¡à°¿',
    tab_signin:'à°¸à±ˆà°¨à± à°‡à°¨à±',tab_signup:'à°¸à±ˆà°¨à± à°…à°ªà±',
    lbl_username:'à°¯à±‚à°œà°°à± à°ªà±‡à°°à± / à°‡à°®à±†à°¯à°¿à°²à±',lbl_password:'à°ªà°¾à°¸à±â€Œà°µà°°à±à°¡à±',lbl_role:'à°ªà°¾à°¤à±à°°',
    lbl_name:'à°ªà±‚à°°à±à°¤à°¿ à°ªà±‡à°°à±',lbl_email:'à°‡à°®à±†à°¯à°¿à°²à±',lbl_phone:'à°«à±‹à°¨à±',
    btn_signin:'à°¸à±ˆà°¨à± à°‡à°¨à± â†’',btn_signup:'à°…à°•à±Œà°‚à°Ÿà± à°¤à°¯à°¾à°°à± à°šà±‡à°¯à°‚à°¡à°¿ â†’',
    d_admin_title:'à°…à°¡à±à°®à°¿à°¨à± à°¡à°¾à°·à±â€Œà°¬à±‹à°°à±à°¡à±',d_admin_sub:'à°µà±‡à°¦à°¿à°• à°¨à°¿à°°à±à°µà°¹à°£',
    d_donors:'à°®à±Šà°¤à±à°¤à°‚ à°¦à°¾à°¤à°²à±',d_consumers:'à°µà°¿à°¨à°¿à°¯à±‹à°—à°¦à°¾à°°à±à°²à±',d_listings:'à°¯à°¾à°•à±à°Ÿà°¿à°µà± à°²à°¿à°¸à±à°Ÿà°¿à°‚à°—à±â€Œà°²à±',d_revenue:'à°®à±Šà°¤à±à°¤à°‚ à°†à°¦à°¾à°¯à°‚',
    tab_pending:'à°ªà±†à°‚à°¡à°¿à°‚à°—à± à°†à°®à±‹à°¦à°¾à°²à±',tab_tx:'à°²à°¾à°µà°¾à°¦à±‡à°µà±€à°²à±',tab_users:'à°µà°¿à°¨à°¿à°¯à±‹à°—à°¦à°¾à°°à±à°²à±',
    req_2h:'2 à°—à°‚à°Ÿà°² à°•à±à°°à°¿à°¤à°‚ à°…à°­à±à°¯à°°à±à°¥à°¿à°‚à°šà°¾à°°à± â€¢ à°¡à±Œà°¨à±â€Œà°Ÿà±Œà°¨à±',req_5h:'5 à°—à°‚à°Ÿà°² à°•à±à°°à°¿à°¤à°‚ â€¢ à°µà°¿à°¶à±à°µà°µà°¿à°¦à±à°¯à°¾à°²à°¯ à°ªà±à°°à°¾à°‚à°¤à°‚',
    tx_title:'à°…à°¨à±à°¨à°¿ à°²à°¾à°µà°¾à°¦à±‡à°µà±€à°²à±',users_title:'à°¨à°®à±‹à°¦à±ˆà°¨ à°µà°¿à°¨à°¿à°¯à±‹à°—à°¦à°¾à°°à±à°²à±',
    d_donor_title:'à°¦à°¾à°¤ à°¡à°¾à°·à±â€Œà°¬à±‹à°°à±à°¡à±',d_donor_sub:'à°®à±€ à°¸à°¹à°•à°¾à°°à°¾à°²à± à°¨à°¿à°°à±à°µà°¹à°¿à°‚à°šà°‚à°¡à°¿',
    d_donated:'à°¦à°¾à°¨à°‚ à°šà±‡à°¸à°¿à°¨ à°µà°¸à±à°¤à±à°µà±à°²à±',d_earned:'à°®à±Šà°¤à±à°¤à°‚ à°¸à°‚à°ªà°¾à°¦à°¨',d_active_list:'à°¯à°¾à°•à±à°Ÿà°¿à°µà± à°²à°¿à°¸à±à°Ÿà°¿à°‚à°—à±â€Œà°²à±',
    tab_surplus:'à°®à°¿à°—à±à°²à± à°—à±à°°à±à°¤à°¿à°‚à°ªà±',tab_freshness:'à°†à°¹à°¾à°° à°¤à°¾à°œà°¾à°¦à°¨à°‚',tab_sell:'à°®à°¿à°—à±à°²à± à°…à°®à±à°®à°‚à°¡à°¿',tab_my_tx:'à°¨à°¾ à°²à°¾à°µà°¾à°¦à±‡à°µà±€à°²à±',
    surplus_title:'à°®à°¿à°—à±à°²à± à°•à°¾à°²à°¿à°•à±à°¯à±à°²à±‡à°Ÿà°°à±',surplus_tip:'à°µà±ƒà°§à°¾à°¨à± à°¤à°—à±à°—à°¿à°‚à°šà±‡ à°šà°¿à°Ÿà±à°•à°¾à°²à±',
    lbl_people:'à°µà±à°¯à°•à±à°¤à±à°² à°¸à°‚à°–à±à°¯',lbl_food_type:'à°†à°¹à°¾à°°à°‚ à°°à°•à°‚',lbl_prepared:'à°¤à°¯à°¾à°°à±à°šà±‡à°¸à°¿à°¨ à°ªà°°à°¿à°®à°¾à°£à°‚ (à°•à°¿à°²à±‹)',lbl_consumed:'à°µà°¿à°¨à°¿à°¯à±‹à°—à°¿à°‚à°šà°¬à°¡à°¿à°‚à°¦à°¿ (%)',
    btn_calculate:'à°²à±†à°•à±à°•à°¿à°‚à°šà°‚à°¡à°¿',
    tip1:'ðŸ“Š à°…à°‚à°šà°¨à°¾ à°•à°‚à°Ÿà±‡ 20% à°¤à°•à±à°•à±à°µ à°µà°‚à°¡à°‚à°¡à°¿.',tip2:'ðŸ§Š 4Â°C à°•à°‚à°Ÿà±‡ à°¤à°•à±à°•à±à°µ à°‰à°·à±à°£à±‹à°—à±à°°à°¤à°²à±‹ à°¨à°¿à°²à±à°µ à°šà±‡à°¯à°‚à°¡à°¿.',tip3:'â° 2 à°—à°‚à°Ÿà°²à°²à±‹à°ªà± à°ªà±‹à°¸à±à°Ÿà± à°šà±‡à°¯à°‚à°¡à°¿.',
    freshness_title:'IoT à°¸à±†à°¨à±à°¸à°°à± à°µà°¿à°¶à±à°²à±‡à°·à°£',sensor_live:'à°²à±ˆà°µà± à°¸à±†à°¨à±à°¸à°°à± à°°à±€à°¡à°¿à°‚à°—à±â€Œà°²à±',ideal_ranges:'à°…à°¨à±à°µà±ˆà°¨ à°ªà°°à°¿à°§à±à°²à±:',
    lbl_temp:'à°‰à°·à±à°£à±‹à°—à±à°°à°¤ (Â°C)',lbl_humidity:'à°¤à±‡à°® (%)',lbl_light:'à°•à°¾à°‚à°¤à°¿ à°¸à±à°¥à°¾à°¯à°¿ (lux)',lbl_co2:'COâ‚‚ à°¸à±à°¥à°¾à°¯à°¿ (ppm)',
    lbl_prep_time:'à°¤à°¯à°¾à°°à±€ (à°—à°‚à°Ÿà°² à°•à±à°°à°¿à°¤à°‚)',btn_analyze:'à°¤à°¾à°œà°¾à°¦à°¨à°‚ à°µà°¿à°¶à±à°²à±‡à°·à°¿à°‚à°šà°‚à°¡à°¿',
    sell_title:'à°®à°¿à°—à±à°²à± à°†à°¹à°¾à°°à°‚ à°ªà±‹à°¸à±à°Ÿà± à°šà±‡à°¯à°‚à°¡à°¿',lbl_food_name:'à°†à°¹à°¾à°°à°‚ à°ªà±‡à°°à±',lbl_qty:'à°ªà°°à°¿à°®à°¾à°£à°‚',
    lbl_price:'à°§à°° (â‚¹)',lbl_expiry:'à°—à°¡à±à°µà± (à°—à°‚à°Ÿà°²à°²à±‹)',lbl_pickup:'à°ªà°¿à°•à°ªà± à°¸à±à°¥à°¾à°¨à°‚',btn_post:'à°…à°®à±à°®à°•à°¾à°¨à°¿à°•à°¿ à°ªà±‹à°¸à±à°Ÿà±',
    my_listings:'à°¨à°¾ à°¯à°¾à°•à±à°Ÿà°¿à°µà± à°²à°¿à°¸à±à°Ÿà°¿à°‚à°—à±â€Œà°²à±',my_tx:'à°¨à°¾ à°²à°¾à°µà°¾à°¦à±‡à°µà±€à°²à±',
    d_consumer_title:'à°…à°‚à°¦à±à°¬à°¾à°Ÿà±à°²à±‹ à°‰à°¨à±à°¨ à°†à°¹à°¾à°°à°‚',d_consumer_sub:'à°®à±€ à°¦à°—à±à°—à°° à°¤à°¾à°œà°¾ à°®à°¿à°—à±à°²à±',
    tab_browse:'à°†à°¹à°¾à°°à°‚ à°šà±‚à°¡à°‚à°¡à°¿',tab_orders:'à°¨à°¾ à°†à°°à±à°¡à°°à±â€Œà°²à±',
    btn_login_to_order:'à°†à°°à±à°¡à°°à± à°šà±‡à°¯à°¡à°¾à°¨à°¿à°•à°¿ à°²à°¾à°—à°¿à°¨à±',my_orders:'à°¨à°¾ à°†à°°à±à°¡à°°à±â€Œà°²à±',
  }
};

const foodItems = [
  {id:1,emoji:'ðŸ›',name:'Biryani',plates:20,time:'2h ago',price:60,unit:'plate',donor:'Hotel Sai Krishna',location:'Downtown',color:'linear-gradient(135deg,#ff9a9e,#fecfef)'},
  {id:2,emoji:'ðŸš',name:'Rice & Curry',plates:15,time:'3h ago',price:40,unit:'plate',donor:'College Canteen',location:'University Area',color:'linear-gradient(135deg,#a18cd1,#fbc2eb)'},
  {id:3,emoji:'ðŸ•',name:'Extra Pizza',plates:8,time:'1h ago',price:30,unit:'piece',donor:'City Cafe',location:'City Center',color:'linear-gradient(135deg,#ffecd2,#fcb69f)'},
  {id:4,emoji:'ðŸ¥—',name:'Salad Mix',plates:25,time:'30m ago',price:25,unit:'box',donor:'Green Eats',location:'Park Street',color:'linear-gradient(135deg,#d4fc79,#96e6a1)'},
  {id:5,emoji:'ðŸ',name:'Pasta',plates:12,time:'4h ago',price:50,unit:'plate',donor:'Italian Corner',location:'Main Road',color:'linear-gradient(135deg,#f6d365,#fda085)'},
  {id:6,emoji:'ðŸ¥ª',name:'Sandwiches',plates:30,time:'2h ago',price:20,unit:'piece',donor:'Bakery House',location:'Old Town',color:'linear-gradient(135deg,#89f7fe,#66a6ff)'},
];

let transactions = [
  {id:'TX001',item:'Biryani',qty:5,price:300,type:'cr',time:'Today 2:30 PM',status:'completed',buyer:'Ravi K.',donor:'Hotel Sai Krishna'},
  {id:'TX002',item:'Rice & Curry',qty:3,price:120,type:'cr',time:'Today 12:00 PM',status:'completed',buyer:'Priya M.',donor:'College Canteen'},
  {id:'TX003',item:'Salad Mix',qty:10,price:250,type:'db',time:'Yesterday 6 PM',status:'pending',buyer:'Arjun R.',donor:'Green Eats'},
];

let myListings = [];
let myOrders = [];
let donorStats = {donated:0,earned:0,active:0};
let users = [
  {name:'Admin User',role:'Admin',joined:'Jan 2025',status:'Active'},
  {name:'Hotel Sai Krishna',role:'Donor',joined:'Feb 2025',status:'Approved'},
  {name:'College Canteen',role:'Donor',joined:'Feb 2025',status:'Pending'},
  {name:'Ravi K.',role:'Consumer',joined:'Mar 2025',status:'Active'},
];

/* ============================================================
   CANVAS PARTICLES
============================================================ */
(function(){
  const canvas=document.getElementById('bgCanvas');
  const ctx=canvas.getContext('2d');
  let W,H,pts=[];
  function init(){W=canvas.width=innerWidth;H=canvas.height=innerHeight;pts=[];for(let i=0;i<60;i++)pts.push({x:Math.random()*W,y:Math.random()*H,r:Math.random()*2+1,dx:(Math.random()-.5)*.4,dy:(Math.random()-.5)*.4,a:Math.random()})}
  function draw(){ctx.clearRect(0,0,W,H);for(let p of pts){p.x+=p.dx;p.y+=p.dy;if(p.x<0||p.x>W)p.dx*=-1;if(p.y<0||p.y>H)p.dy*=-1;ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,Math.PI*2);ctx.fillStyle=`rgba(0,230,118,${p.a*.3})`;ctx.fill()}for(let i=0;i<pts.length;i++)for(let j=i+1;j<pts.length;j++){let d=Math.hypot(pts[i].x-pts[j].x,pts[i].y-pts[j].y);if(d<120){ctx.beginPath();ctx.moveTo(pts[i].x,pts[i].y);ctx.lineTo(pts[j].x,pts[j].y);ctx.strokeStyle=`rgba(0,230,118,${.08*(1-d/120)})`;ctx.stroke()}}requestAnimationFrame(draw)}
  window.addEventListener('resize',init);init();draw();
})();

/* ============================================================
   LANGUAGE
============================================================ */
function setLang(l){
  lang=l;
  document.querySelectorAll('.lang-btn').forEach(b=>b.classList.toggle('active',b.textContent.trim()==={en:'EN',hi:'à¤¹à¤¿',te:'à°¤à±†'}[l]));
  document.querySelectorAll('[data-i18n]').forEach(el=>{
    const k=el.getAttribute('data-i18n');
    if(translations[l][k]!==undefined)el.innerHTML=translations[l][k];
  });
}

/* ============================================================
   NAVIGATION
============================================================ */
function showSection(id){
  const cur=document.querySelector('.section.active');
  if(cur&&cur.id!==id)sectionHistory.push(cur.id);
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.getElementById('backBtn').style.display=sectionHistory.length>0?'flex':'none';
  window.scrollTo(0,0);
}
function goBack(){
  if(sectionHistory.length>0){const p=sectionHistory.pop();document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));document.getElementById(p).classList.add('active');document.getElementById('backBtn').style.display=sectionHistory.length>0?'flex':'none';window.scrollTo(0,0);}
}
function goHome(){sectionHistory=[];showSection('sec_home');animateCounters();updateHeaderNav();}

function updateHeaderNav(){
  const btn=document.getElementById('authNavBtn');
  if(currentUser){btn.textContent=translations[lang].nav_logout||'Logout';btn.onclick=logout;}
  else{btn.textContent=translations[lang].nav_login||'Login';btn.onclick=()=>showSection('sec_auth');}
}

/* ============================================================
   COUNTERS
============================================================ */
function animateCounters(){
  document.querySelectorAll('[data-count]').forEach(el=>{
    const target=+el.getAttribute('data-count');const dur=1800;const step=target/(dur/16);let cur=0;
    const t=()=>{cur+=step;if(cur<target){el.textContent=Math.floor(cur).toLocaleString();requestAnimationFrame(t);}else el.textContent=target.toLocaleString();};t();
  });
}
setTimeout(animateCounters,600);

/* ============================================================
   AUTH
============================================================ */
function selectRole(role){currentRole=role;showSection('sec_auth');}

function switchTab(tab){
  document.getElementById('formSignin').style.display=tab==='signin'?'block':'none';
  document.getElementById('formSignup').style.display=tab==='signup'?'block':'none';
  document.getElementById('tabSignin').classList.toggle('active',tab==='signin');
  document.getElementById('tabSignup').classList.toggle('active',tab==='signup');
}

function handleSignin(){
  const u=document.getElementById('si_user').value.trim();
  const p=document.getElementById('si_pass').value.trim();
  const r=currentRole;
  if(!u||!p){showToast('Please fill in all fields','error');return;}
  if(!r){showToast('Please select a role from the home page','error');goHome();return;}
  currentUser={name:u,role:r};
  currentRole=r;
  users.push({name:u,role:r.charAt(0).toUpperCase()+r.slice(1),joined:'Now',status:'Active'});
  afterLogin();
}

function handleSignup(){
  const n=document.getElementById('su_name').value.trim();
  const e=document.getElementById('su_email').value.trim();
  const ph=document.getElementById('su_phone').value.trim();
  const r=document.getElementById('su_role').value;
  const p=document.getElementById('su_pass').value.trim();
  if(!n||!e||!ph||!r||!p){showToast('Please fill in all fields','error');return;}
  currentUser={name:n,role:r};
  currentRole=r;
  users.push({name:n,role:r.charAt(0).toUpperCase()+r.slice(1),joined:'Just now',status:'Active'});
  showToast(`Welcome, ${n}! Account created ðŸŽ‰`,'success');
  afterLogin();
}

function afterLogin(){
  sectionHistory=[];
  updateHeaderNav();
  if(currentRole==='admin'){document.getElementById('adminName').textContent=currentUser.name;renderAllTx();renderUsers();showSection('sec_admin');}
  else if(currentRole==='donor'){document.getElementById('donorName').textContent=currentUser.name;renderMyListings();renderDonorTx();showSection('sec_donor');}
  else{
    document.getElementById('consumerName').textContent=currentUser.name;
    document.getElementById('consumerChip').style.display='flex';
    document.getElementById('consumerLogoutBtn').style.display='inline-block';
    document.getElementById('consumerLoginBtn').style.display='none';
    renderFoodGrid();renderConsumerOrders();showSection('sec_consumer');
  }
  setTimeout(()=>showToast(`Welcome back, ${currentUser.name}! ðŸ‘‹`,'success'),200);
}

function logout(){
  currentUser=null;currentRole=null;sectionHistory=[];
  document.getElementById('consumerChip').style.display='none';
  document.getElementById('consumerLogoutBtn').style.display='none';
  document.getElementById('consumerLoginBtn').style.display='inline-block';
  updateHeaderNav();
  showToast('Logged out successfully!','info');
  setTimeout(goHome,400);
}

/* ============================================================
   ADMIN
============================================================ */
function adminTab(t){
  document.getElementById('adminPending').style.display=t==='pending'?'block':'none';
  document.getElementById('adminTransactions').style.display=t==='transactions'?'block':'none';
  document.getElementById('adminUsers').style.display=t==='users'?'block':'none';
  document.querySelectorAll('#sec_admin .stab').forEach((b,i)=>b.classList.toggle('active',['pending','transactions','users'][i]===t));
}

function approveDonor(btn,name){
  btn.closest('.pitem').style.animation='fadeOut .3s ease-out forwards';
  setTimeout(()=>btn.closest('.pitem').remove(),300);
  showToast(`${name} approved! âœ…`,'success');
}
function rejectDonor(btn){
  btn.closest('.pitem').style.animation='fadeOut .3s ease-out forwards';
  setTimeout(()=>btn.closest('.pitem').remove(),300);
  showToast('Request rejected','error');
}

function renderAllTx(){
  const el=document.getElementById('allTxList');
  el.innerHTML=transactions.map(tx=>`
    <div class="tx-item">
      <div class="tx-ico" style="background:${tx.type==='cr'?'rgba(0,230,118,0.15)':'rgba(244,67,30,0.12)'}">
        ${tx.type==='cr'?'ðŸ’°':'ðŸ›’'}
      </div>
      <div class="tx-info">
        <h4>${tx.item} Ã— ${tx.qty} â€” ${tx.buyer}</h4>
        <p>${tx.time} â€¢ ${tx.donor}</p>
      </div>
      <div>
        <div class="tx-amount ${tx.type}">â‚¹${tx.price}</div>
        <div class="tx-status ${tx.status}">${tx.status}</div>
      </div>
    </div>`).join('');
}

function renderUsers(){
  document.getElementById('usersBody').innerHTML=users.map(u=>`
    <tr><td>${u.name}</td><td>${u.role}</td><td>${u.joined}</td>
    <td><span class="tx-status ${u.status==='Active'||u.status==='Approved'?'completed':'pending'}">${u.status}</span></td></tr>`).join('');
}

/* ============================================================
   DONOR
============================================================ */
function donorTab(t){
  ['surplus','freshness','sell','mytx'].forEach(s=>document.getElementById(`tab_${s}_content`).style.display=s===t?'block':'none');
  document.querySelectorAll('#sec_donor .stab').forEach((b,i)=>b.classList.toggle('active',['surplus','freshness','sell','mytx'][i]===t));
}


function updateMeter(type,val){
  const configs={
    temp:{el:'mTemp',valEl:'mTempVal',max:60,unit:'Â°C'},
    hum:{el:'mHum',valEl:'mHumVal',max:100,unit:'%'},
    light:{el:'mLight',valEl:'mLightVal',max:2000,unit:'lux'},
    co2:{el:'mCO2',valEl:'mCO2Val',max:2000,unit:'ppm'},
  };
  const c=configs[type];if(!c)return;
  const pct=Math.min(100,(val/c.max)*100);
  document.getElementById(c.el).style.width=pct+'%';
  document.getElementById(c.valEl).textContent=val?`${val}${c.unit}`:'â€”';
}


function postFood(){
  const n=document.getElementById('sellName').value.trim();
  const q=document.getElementById('sellQty').value;
  const p=document.getElementById('sellPrice').value;
  const e=document.getElementById('sellExpiry').value;
  const l=document.getElementById('sellLocation').value.trim();
  if(!n||!q||!p||!l){showToast('Please fill all required fields','error');return;}
  const listing={id:Date.now(),name:n,qty:q,price:p,expiry:e||'â€”',location:l,time:'Just now'};
  myListings.push(listing);
  donorStats.active=myListings.length;
  donorStats.donated++;
  document.getElementById('dDonated').textContent=donorStats.donated;
  document.getElementById('dActive').textContent=donorStats.active;
  renderMyListings();
  // Add to food grid
  foodItems.push({id:Date.now(),emoji:'ðŸ±',name:n,plates:+q,time:'Just now',price:+p,unit:'plate',donor:currentUser?currentUser.name:'You',location:l,color:'linear-gradient(135deg,#a8edea,#fed6e3)'});
  ['sellName','sellQty','sellPrice','sellExpiry','sellLocation'].forEach(id=>document.getElementById(id).value='');
  showToast(`${n} posted for â‚¹${p}! ðŸŽ‰`,'success');
  const tx={id:'TX'+Date.now(),item:n,qty:+q,price:+q * +p,type:'cr',time:'Just now',status:'pending',buyer:'â€”',donor:currentUser?currentUser.name:'You'};
  transactions.unshift(tx);
  renderDonorTx();
}

function renderMyListings(){
  const el=document.getElementById('myListings');
  if(!myListings.length){el.innerHTML='<div style="color:rgba(255,255,255,0.4);text-align:center;padding:20px;font-size:14px">No active listings yet</div>';return;}
  el.innerHTML=myListings.map(l=>`
    <div style="padding:14px 16px;background:rgba(255,255,255,0.06);border-radius:14px;display:flex;justify-content:space-between;align-items:center;gap:12px">
      <div><div style="font-size:15px;font-weight:700">${l.name}</div><div style="font-size:12px;color:rgba(255,255,255,0.5)">${l.qty} units â€¢ â‚¹${l.price} â€¢ ${l.location}</div></div>
      <button onclick="removeListing(${l.id})" style="padding:6px 14px;background:rgba(244,67,30,0.15);border:1px solid rgba(244,67,30,0.3);border-radius:8px;color:#ff6b6b;font-size:12px;font-weight:600;cursor:pointer;font-family:var(--font)">Remove</button>
    </div>`).join('');
}

function removeListing(id){
  myListings=myListings.filter(l=>l.id!==id);
  donorStats.active=myListings.length;
  document.getElementById('dActive').textContent=donorStats.active;
  renderMyListings();showToast('Listing removed','info');
}

function renderDonorTx(){
  const el=document.getElementById('donorTxList');
  const mine=transactions.filter(t=>t.donor===(currentUser?currentUser.name:''));
  if(!mine.length){el.innerHTML='<div style="color:rgba(255,255,255,0.4);text-align:center;padding:20px">No transactions yet</div>';return;}
  el.innerHTML=mine.map(tx=>`
    <div class="tx-item">
      <div class="tx-ico" style="background:rgba(0,230,118,0.15)">ðŸ’°</div>
      <div class="tx-info"><h4>${tx.item} Ã— ${tx.qty}</h4><p>${tx.time}</p></div>
      <div><div class="tx-amount cr">â‚¹${tx.price}</div><div class="tx-status ${tx.status}">${tx.status}</div></div>
    </div>`).join('');
}

/* ============================================================
   CONSUMER
============================================================ */
function consumerTab(t){
  document.getElementById('tab_browse_content').style.display=t==='browse'?'block':'none';
  document.getElementById('tab_orders_content').style.display=t==='orders'?'block':'none';
  document.querySelectorAll('#sec_consumer .stab').forEach((b,i)=>b.classList.toggle('active',['browse','orders'][i]===t));
}

function renderFoodGrid(){
  document.getElementById('foodGrid').innerHTML=foodItems.map((f,i)=>`
    <div class="fcard" style="animation-delay:${i*.07}s">
      <div class="fcard-img" style="background:${f.color}">
        ${f.emoji}
        <div class="fcard-badge">Fresh</div>
      </div>
      <div class="fcard-body">
        <h3>${f.name}</h3>
        <div class="fcard-meta">
          <span><i class="fas fa-users"></i> ${f.plates} ${f.unit}s</span>
          <span><i class="fas fa-clock"></i> ${f.time}</span>
        </div>
        <div class="fcard-meta"><span><i class="fas fa-map-marker-alt"></i> ${f.location}</span></div>
        <div class="fcard-price">â‚¹${f.price} <span>/ ${f.unit}</span></div>
        <button class="btn-order" onclick="orderFood(${f.id})"><i class="fas fa-shopping-cart"></i> Order Now</button>
      </div>
    </div>`).join('');
}

function orderFood(id){
  if(!currentUser){showToast('Please login to place an order','error');showSection('sec_auth');return;}
  const f=foodItems.find(x=>x.id===id);if(!f)return;
  // Store current food in modal state
  window._orderFood=f;
  // Populate modal
  document.getElementById('om_emoji').textContent=f.emoji;
  document.getElementById('om_name').textContent=f.name;
  document.getElementById('om_donor').textContent=`${f.donor} â€¢ ${f.location}`;
  document.getElementById('om_price').textContent=f.price;
  document.getElementById('om_qty').value=1;
  // Reset payment to UPI
  selectPay('upi');
  // Pre-fill name/phone if user
  if(currentUser){
    document.getElementById('addr_name').value=currentUser.name||'';
    document.getElementById('addr_phone').value='';
  }
  updateBill();
  document.getElementById('orderModal').classList.add('open');
}

function closeOrderModal(){
  document.getElementById('orderModal').classList.remove('open');
}

function changeQty(delta){
  const el=document.getElementById('om_qty');
  let v=parseInt(el.value)+delta;
  el.value=Math.max(1,Math.min(20,v));
  updateBill();
}

function updateBill(){
  const qty=parseInt(document.getElementById('om_qty').value)||1;
  const price=parseInt(document.getElementById('om_price').textContent)||0;
  const sub=qty*price;
  const delivery=sub>=200?0:15;
  const total=sub+delivery+5;
  document.getElementById('b_qty').textContent=qty;
  document.getElementById('b_subtotal').textContent=sub;
  document.getElementById('b_delivery').textContent=delivery===0?'FREE':delivery;
  document.getElementById('b_total').textContent=total;
  document.getElementById('qr_amount').textContent=total;
}

function selectPay(type){
  ['upi','card','cod'].forEach(t=>{
    document.getElementById('pay_'+t).classList.toggle('selected',t===type);
  });
  document.getElementById('upi_section').classList.toggle('show',type==='upi');
  document.getElementById('card_section').classList.toggle('show',type==='card');
  document.getElementById('cod_section').classList.toggle('show',type==='cod');
  window._payType=type;
}

function selectUpiApp(el,name){
  document.querySelectorAll('.upi-app').forEach(a=>a.classList.remove('active'));
  el.classList.add('active');
  document.getElementById('upi_id').placeholder=`yourname@${name.toLowerCase()}`;
}

function verifyUPI(){
  const v=document.getElementById('upi_id').value.trim();
  if(!v||!v.includes('@')){showToast('Enter a valid UPI ID (e.g. name@upi)','error');return;}
  showToast(`UPI ID verified: ${v} âœ…`,'success');
}

function formatCard(el){
  let v=el.value.replace(/\D/g,'').substring(0,16);
  let fmt='';for(let i=0;i<v.length;i++){if(i>0&&i%4===0)fmt+=' ';fmt+=v[i];}
  el.value=fmt;
  document.getElementById('cv_num').textContent=fmt.padEnd(19,'â€¢').replace(/\d{4}(?= )/g,'â€¢â€¢â€¢â€¢')||'â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢';
  const disp=fmt||'â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢';document.getElementById('cv_num').textContent=disp.length===19?disp:'â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢';
  document.getElementById('cv_num').textContent=fmt||'â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢';
}

function formatExpiry(el){
  let v=el.value.replace(/\D/g,'');
  if(v.length>=2)v=v.substring(0,2)+'/'+v.substring(2,4);
  el.value=v;
  document.getElementById('cv_exp').textContent=v||'MM/YY';
}

function confirmOrder(){
  const name=document.getElementById('addr_name').value.trim();
  const street=document.getElementById('addr_street').value.trim();
  const city=document.getElementById('addr_city').value.trim();
  const pin=document.getElementById('addr_pin').value.trim();
  const phone=document.getElementById('addr_phone').value.trim();
  if(!name||!street||!city||!pin||!phone){showToast('Please fill all address fields','error');return;}
  if(phone.length!==10){showToast('Enter a valid 10-digit phone number','error');return;}
  const payType=window._payType||'upi';
  if(payType==='upi'){
    const upiId=document.getElementById('upi_id').value.trim();
    if(!upiId){showToast('Enter your UPI ID or scan the QR code','error');return;}
  }
  if(payType==='card'){
    const cnum=document.getElementById('c_num').value.trim();
    const cexp=document.getElementById('c_exp').value.trim();
    const ccvv=document.getElementById('c_cvv').value.trim();
    if(!cnum||!cexp||!ccvv){showToast('Fill all card details','error');return;}
  }
  const f=window._orderFood;
  const qty=parseInt(document.getElementById('om_qty').value)||1;
  const total=parseInt(document.getElementById('b_total').textContent);
  const orderId='FS'+Date.now().toString().slice(-6);
  const tx={id:orderId,item:f.name,qty,price:total,type:'db',time:new Date().toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'}),status:'out for delivery',buyer:currentUser.name,donor:f.donor,address:`${street}, ${city} - ${pin}`,payment:payType.toUpperCase()};
  myOrders.unshift(tx);transactions.unshift(tx);
  donorStats.earned+=total;document.getElementById('dEarned').textContent='â‚¹'+donorStats.earned;
  renderConsumerOrders();
  closeOrderModal();
  showToast(`Order placed! #${orderId} ðŸŽ‰`,'success');
  setTimeout(()=>openTracking(orderId,f),500);
}

/* ===== TRACKING ===== */
const agents=[
  {name:'Raju Kumar',stars:'â˜…â˜…â˜…â˜…Â½',vehicle:'ðŸ›µ Honda Activa â€¢ AP-09-AB-1234',avatar:'ðŸ§‘'},
  {name:'Priya Devi',stars:'â˜…â˜…â˜…â˜…â˜…',vehicle:'ðŸ›µ TVS Jupiter â€¢ TS-11-CD-5678',avatar:'ðŸ‘©'},
  {name:'Suresh Babu',stars:'â˜…â˜…â˜…â˜…',vehicle:'ðŸš² Electric Cycle â€¢ AP-03-EF-9012',avatar:'ðŸ§”'},
  {name:'Anita Singh',stars:'â˜…â˜…â˜…â˜…Â½',vehicle:'ðŸ›µ Bajaj Chetak â€¢ KA-01-GH-3456',avatar:'ðŸ‘±â€â™€ï¸'},
];

let _trackTimer=null;
let _bikeStep=0;

// Bike path waypoints as percentages [left%, top%]
const bikeWaypoints=[
  [15,75],[25,65],[38,43],[50,42],[62,42],[72,38],[82,36]
];

function openTracking(orderId,food){
  const agent=agents[Math.floor(Math.random()*agents.length)];
  document.getElementById('track_order_id').textContent='Order #'+orderId;
  document.getElementById('agent_name').textContent=agent.name;
  document.getElementById('agent_stars').textContent=agent.stars;
  document.getElementById('agent_vehicle').textContent=agent.vehicle;
  document.getElementById('agent_avatar').textContent=agent.avatar;
  // Reset steps
  for(let i=0;i<6;i++){
    const s=document.getElementById('step'+i);
    s.className='step-item'+(i===0?' done':'  pending');
    if(i===0)s.querySelector('p').textContent=new Date().toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'});
  }
  document.getElementById('deliveryDone').classList.remove('show');
  // Reset bike
  _bikeStep=0;
  const bike=document.getElementById('deliveryBike');
  bike.style.left=bikeWaypoints[0][0]+'%';
  bike.style.top=bikeWaypoints[0][1]+'%';
  // ETA
  document.getElementById('eta_value').textContent='~25 mins';
  // Show modal
  document.getElementById('trackingModal').classList.add('open');
  // Start simulation
  clearTimeout(_trackTimer);
  simulateDelivery(1);
}

function simulateDelivery(step){
  const delays=[0,3000,7000,12000,18000,25000];
  const etaVals=['~25 mins','~22 mins','~18 mins','~12 mins','~5 mins','Arrived!'];
  const stepMsgs=['','Order confirmed by restaurant âœ…','Chef is packing your food ðŸ‘¨â€ðŸ³','Delivery partner picked up your order','Almost there â€” 500m away ðŸ“',''];
  if(step>5)return;
  _trackTimer=setTimeout(()=>{
    // Advance step
    const prev=document.getElementById('step'+(step-1));
    if(prev)prev.className='step-item done',prev.querySelector('.step-dot').textContent='âœ“';
    const cur=document.getElementById('step'+step);
    if(cur){cur.className='step-item active';if(stepMsgs[step])cur.querySelector('p').textContent=stepMsgs[step];}
    document.getElementById('eta_value').textContent=etaVals[step];
    // Move bike
    if(step<bikeWaypoints.length){
      const bike=document.getElementById('deliveryBike');
      bike.style.left=bikeWaypoints[step][0]+'%';
      bike.style.top=bikeWaypoints[step][1]+'%';
    }
    if(step===5){
      // Final
      setTimeout(()=>{
        document.getElementById('step5').className='step-item done';
        document.getElementById('step5').querySelector('.step-dot').textContent='âœ“';
        document.getElementById('deliveryDone').classList.add('show');
        document.getElementById('eta_value').textContent='Delivered âœ“';
        // Update order status
        if(myOrders.length){myOrders[0].status='delivered';renderConsumerOrders();}
      },1200);
    } else {
      simulateDelivery(step+1);
    }
  },delays[step]);
}

function closeTrackingModal(){
  document.getElementById('trackingModal').classList.remove('open');
  clearTimeout(_trackTimer);
}

function renderConsumerOrders(){
  const el=document.getElementById('consumerTxList');
  if(!myOrders.length){el.innerHTML='<div style="color:rgba(255,255,255,0.4);text-align:center;padding:20px">No orders yet</div>';return;}
  el.innerHTML=myOrders.map(o=>`
    <div class="tx-item">
      <div class="tx-ico" style="background:rgba(255,109,0,0.15)">ðŸ›’</div>
      <div class="tx-info">
        <h4>${o.item} Ã— ${o.qty}</h4>
        <p>${o.time} â€¢ from ${o.donor} ${o.address?'â€¢ '+o.address:''}</p>
        <p style="margin-top:3px;font-size:11px;color:rgba(255,255,255,0.3)">Payment: ${o.payment||'â€”'}</p>
      </div>
      <div style="text-align:right">
        <div class="tx-amount db">â‚¹${o.price}</div>
        <div class="tx-status ${o.status==='delivered'?'completed':'pending'}">${o.status}</div>
        ${o.status!=='delivered'?`<button onclick="openTracking('${o.id}',{})" style="margin-top:6px;padding:5px 12px;background:rgba(0,230,118,0.12);border:1px solid rgba(0,230,118,0.25);border-radius:8px;color:var(--green);font-size:11px;font-weight:700;cursor:pointer;font-family:var(--font)">Track</button>`:''}
      </div>
    </div>`).join('');
}


/* ============================================================
   TOAST
============================================================ */
function showToast(msg,type='success'){
  const t=document.getElementById('toast');
  const ico=document.getElementById('toastIcon');
  t.className=`toast ${type}`;
  document.getElementById('toastMsg').textContent=msg;
  ico.className={success:'fas fa-check',error:'fas fa-times',info:'fas fa-info'}[type]||'fas fa-check';
  t.classList.add('show');
  clearTimeout(t._timer);t._timer=setTimeout(()=>t.classList.remove('show'),3200);
}

/* ============================================================
   INIT
============================================================ */
renderFoodGrid();
// CSS fade out anim
const s=document.createElement('style');s.textContent='@keyframes fadeOut{to{opacity:0;transform:translateX(30px)}}';document.head.appendChild(s);
</script>
<script src="/static/app.js" type="module"></script>
</body>
</html>
